{roman}{page}{1}

        {1.5in}

            Human Control of a Bicycle


        1in

            Jason K. Moore


        0.5in

            Advisor: Mont Hubbard


        0.5in

            Department of Mechanical and Aerospace Engineering
            Qualifying Exam Proposal


        0.5in Committee:
        Ronald A. Hess (Chair)
        Fidelis O. Eke
        Michael R. Hill
        Donald L. Margolis
        Keith R. Williams
        0.75in

            University of California, Davis


        0.25in

            September 25, 2009




{arabic}{page}{1}

Introduction
============

Bicycles are a very interesting curiosity from a dynamic and
control perspective. They have caught the attention of numerous
scientists over the past 140 years but unfortunately mostly as a
hobby. Relative to the study of automobiles and aircraft there has
been very little research about the bicycle even though it provides
a very rich, tractable and economical platform for dynamics and
control research. In addition, a larger understanding and a greater
usage of the bicycle could be a key element to many of our current
transportation problems such as gridlock, pollution, sprawl,
climate change and obesity. The studies that have been done have
revealed some very interesting aspects of it's physical nature such
as self-stability and counterintuitive control requirements.

Accurate models of the bicycle may include many complex dynamic
principles including but not limited to complex kinematic geometric
constraints, complex tire-roadway interactions, non-minimum phase
behavior and speed dependent stability. A bicycle rider system is a
classic human-in-the-loop control system and more complex control
models are needed to predict the rider's control actions. This is
complicated further by the fact that the human is flexibly
connected to the bicycle and makes up the majority of the weight of
the system. Different riders influence the system from both a
biomechanical and control standpoint; thus rider variations must be
taken into account during control studies. This makes the control
of a bicycle very unique in terms of manual control studies.
Further research on the bicycle rider system will bring new control
strategies and models to the table and provide insight into bicycle
design methodology.

Plan
====

The proposed research will be divided into three major topics. The
work is based on studies done at UC Davis and Delft University of
Technology over the past three years and will continue during the
next two years as a part of a recently awarded NSF grant titled
"Human Control of Bicycle Dynamics with Experimental Validation and Implications for Bicycle Handling and Design."
Mont Hubbard and Ron Hess will supervise my research for the period
of the grant. The following gives a brief description of each
component:

Dynamic models of the bicycle and rider
    I will develop a bicycle and rider dynamic model that incorporates
    robust and experimentally validated bicycle dynamics coupled to a
    simple biomechanical representation of the rider. The rider model
    will include means for incorporating biomechanical control inputs
    likely to be used by the human rider such as upper body motion.

Manual control model of the human bicycle rider
    I will identify a control theoretic model which utilizes the human
    operator's visual, vestibular, and proprioceptive sensing
    capabilities in forming the feedback loops necessary for
    stabilization and control of an ordinary bicycle. Control inputs
    will include steering torque and any biomechanically relevant body
    motions. The control model will follow the tenets of the
    "crossover model" of the human operator and will incorporate
    multiple loops for realistic sensing and actuation. Other manual
    control models will be implemented if more fidelity is required.

Experimental validation of the human operator control models
    I will design and construct an instrumented bicycle to be ridden by
    a human. The purpose of the instrumented bicycle is to allow for
    the measurement of the motions of a bicycle with a human rider and
    for experimental validation of the control theoretic models of the
    human rider. The bicycle will be outfitted for measurement of
    system states and may be used in conjunction with video motion
    capture systems.


The research plan outlines both the research that I have already
completed in the last three years at both UC Davis and Delft
University of Technology. For the proposed research the expected
amount of time for each part is shown in italics.
{Completed Research}

Whipple Model
    I symbolically derived the non-linear Whipple
    model {Whipple1899}using Kane's method and linearized the model
    about the upright constant forward speed configuration. The
    linearized model was validated against the benchmark bicycle model
    presented in {MeijaardPapadopoulosRuinaSchwab2007}.

Model Extensions
    The Whipple model was extended in several ways. Three extra degrees
    of freedom were added to describe passive rider dynamics. An
    additional flywheel was added to the front wheel for stability
    analysis. An extra steering axis was added for a stability study of
    the Swing Bike. Ground contact constraints were changed to model
    the bicycle on a treadmill.

Parametric Study
    The effects of varying various parameters in the Whipple and
    extended models were studied including: important bicycle
    geometry {MooreHubbard2008}, spring and damper constants of the
    passive flexible rider {MoorePetersonHubbard2007}and angular
    momentum of the additional flywheel.

Physical Properties Estimation
    A more accurate and complete method of measuring the bicycle
    physical properties was
    designed {MooreKooijmanHubbardSchwab2009}based on the methods
    in {Kooijman2006}. Six different bicycles with eight total
    configurations were measured. A method of calculating the physical
    properties of the rider by mathematical geometrical estimation was
    also developed and the calculations have been made for four
    different riders.

Video Bicycle
    A bicycle capable of measuring and collecting kinematic data of the
    vehicle states and visually recording the rider's movements was
    designed and constructed in collaboration with researchers at Delft
    University of Technology. The bicycle was used to quantify the
    steering control spectrum and to observe the rider's movements
    relative to the bicycle frame {KooijmanSchwabMoore2009}.

Motion Capture/PCA
    Full body and bicycle motion capture was performed to measure the
    kinematics of a bicyclist stabilizing a bicycle on a treadmill.
    Principal component analysis was used to decompose the position
    data and identify rider and bicycle motions. Connections were shown
    between the various motions and it was determined that little upper
    body motion occurred during normal
    bicycling {MooreKooijmanSchwab2009}.


Proposed Research
-----------------

Literature Review
    (*1 month*) Do a comprehensive review of bicycle and motorcycle
    stability, control and handling research. Also review aircraft,
    automobile and other manual control research including system
    identification.

Rider Biomechanics
    (*2 months*) Develop a simple biomechanical model of the rider
    based on the observed motions in the motion capture experiments.
    The model will have the minimum complexity needed to demonstrate
    the actual additional rider dynamics in stabilizing and controlling
    a bicycle during normal maneuvers.

Rider parameter estimation
    (*2 months*) Develop a method of measuring the geometry, mass,
    center of mass and moment of inertia of a rider seated on a bicycle
    based on the biomechanic model developed and the parameter
    estimations presented in {Yeadon1990a}.

Manual Control Model
    (*4 months*) Design a control model based on manual control theory
    typically used to model pilot control behavior in aircraft. This
    model will include realistic sensing, time-delays and follow the
    basis of the crossover model {McRuer1980}.

Instrumented Bicycle
    (*6 months*) An instrumented bicycle will be designed and
    constructed that will be capable of measuring the kinematics and
    forces of the bicycle and rider needed to calculate the inputs and
    outputs to the manual control model. The bicycle will make use of
    angle sensors, rate gyros, accelerometers and torque sensors
    coupled to an on-board wireless DAQ system. The bicycle speed will
    be regulated by an electric hub motor to eliminate dynamic effects
    associated with pedaling. The physical properties of the
    instrumented bicycle will also be measured.

Data Collection
    (*2 months*) The instrumented bicycle will be used to collect data
    while two riders stabilize the bicycle under controlled
    perturbations. The perturbations will be designed such that they
    are easily simulated.

System Identification
    (*2 months*) The experimental data will be used to simulate the
    maneuvers done during the experiments and the control model will be
    tuned to get acceptable results. More formal system identification
    methods will be used if necessary.


Bicycle Dynamics
================

Review of Bicycle Models
------------------------

As was mentioned in the introduction, the bicycle has been studied
by many scientists over the years. The bicycle is a rich dynamic
system that is difficult to model accurately.
{MeijaardPapadopoulosRuinaSchwab2007}did an excellent job of
sorting through 140 years of bicycle dynamics papers and providing
a benchmarked bicycle that finally verified the correct equations
of the linearized Whipple Model {Whipple1899}. Bicycle-only models
can be divided into two main categories: models that do not exhibit
open loop stability and models that do. All of these models can be
extended by adding additional dynamics such as tire-road
interactions, frame flexibility, and human biomechanics. These
extensions can have effects on the stability and control of the
bicycle. {Simple Models}Typically a one degree of freedom model
that produces a roll equation of motion is used to model a bicycle
in its most basic form. This model has been derived and analyzed by
many including, but not limited to, {TimoshenkoYoung1948},
{Karnopp2004}and {AstromKleinLennartsson2005}. These models do not
have enough fidelity to predict a real bicycle's uncontrolled
motion and do not predict the speed dependent stability that higher
order models can. These models have been used for control
studies {Getz1994,CloydHubbardAlaways1996,Karnopp2004}as they
exhibit the non-minimum phase behavior that predicts the necessity
of steering into the roll for stabilization. Controllers based on
these models have also been used on actual experimental control
models {SuryanarayananTomizukaWeaver2002}. This type of model will
not be used in my studies. {Whipple Model}The lowest order model
that has had some experimental
validation {KooijmanSchwabMeijaard2008}, is able to predict speed
dependent stability and includes a complete physical description of
the four rigid bodies is typically referred to as the
"Whipple Model". This is in honor of Francis J. W. Whipple, the
first author to publish a correct derivation of the linear
equations of motion of this particular bicycle model {Whipple1899}.
This model will be used as a basis for all further studies proposed
herein. Many researchers over the past century have attempted to
derive and analyze this model but very few have been successful.
{MeijaardPapadopoulosRuinaSchwab2007}give a complete historical
review of uncontrolled bicycle research which made use of the
historical comparisons in the thesis by {Hand1988}.
{MeijaardPapadopoulosRuinaSchwab2007}also benchmarked the Whipple
Model by deriving the linearized equations of motion by four
independent methods (two independent pen and paper calculations and
two different dynamic software packages). Furthermore,
{Basu-MandalChatterjeePapadopoulos2007}benchmarked various torque
free circular motions in the non-linear case with two additional
independent derivations of the equations of motion.
{Kooijman2006}has verified by experiment that the linearized
Whipple Model does in fact predict the uncontrolled motion of a
normal bicycle in a speed range of about 3 to 6 m/s. These papers
and my own derivation of the Whipple Model are the basis for using
this model in my research. {Motorcycle Models}The motorcycle is
modeled in much the same fashion as the bicycle except that
tire-road interactions and suspension are included. Also, the
human's biomechanical motions play a smaller role because the
motorcycle typically weighs more than the rider. The most cited
models are those developed by Robin S. Sharp. His first
model {Sharp1971}includes tire compliance and side slip. The model
has been refined over the years to improve accuracy by adding frame
flexibility, rider models and improving the tire
models {SharpLimebeerGani1999,SharpLimebeer2001,SharpEvangelouLimebeer2004}.
He was also the first to give names to the eigenmodes of the
Whipple Model {Sharp1975}. He and David Limebeer give a review of
bicycle and motorcycle modeling in {LimebeerSharp2006}covering much
of their work. Other notable studies include ones developed by
{Koenen1983}and {CossalterLot2002}. {Whipple Model}{Derivation}The
Whipple Model will be the foundation for any extensions we develop.
This section details a brief description of the model derivation
using Kane's method {KaneLevinson1985}. The Whipple model
(Fig. fig:bikeDim) is made up of four rigid bodies (frame/rider,
fork/handlebar and two wheels) connected to each other by
frictionless revolute joints. The wheels contact the ground under
pure rolling and no sideslip conditions. The bicycle is assumed to
be laterally symmetric.

        .. figure:: bikeDim.pdf
           :align: center
           :alt: image
           
           image
        

    {The bicycle in the upright no steer configuration. The rigid bodies
    are the rear wheel, C, frame/rider, D, fork/handlebar, F and front wheel, G.
    The geometric parameters are also shown.}(fig:bikeDim)


Four rigid bodies (the rear wheel, C, frame/rider, D,
fork/handlebar, F and front wheel, G), three intermediate reference
frames (yaw, A, lean, B and steer axis, E) and eight generalized
coordinates (:math:`$q_i$`, :math:`$i = 1,\ldots,8$`) were used to
characterize the bicycle configuration (Fig. fig:genCoord) within
the Newtonian reference frame, N. The generalized coordinates are
defined as follows: :math:`$q_1$` and :math:`$q_2$` locate the rear
wheel contact point in the ground plane, :math:`$q_3$` the yaw
angle, :math:`$q_4$` the lean angle, :math:`$q_5$` the rotation
angle of the rear wheel relative to the lean frame B, :math:`$q_6$`
the frame pitch angle, :math:`$q_7$` the steer angle and
:math:`$q_8$` the rotation of the front wheel. The wheel contact
points for the front and rear wheel are :math:`$C_n$` and
:math:`$G_n$`, respectively. The Whipple model is further
characterized by a non-minimum set of physical parameters which
include geometry, mass, and moments of inertia. The geometrical
parameters are depicted in Fig. fig:bikeDim where each body (C, D,
F and G) has mass and moment of inertia.

        .. figure:: genCoord.pdf
           :align: center
           :alt: image
           
           image
        

    {Diagram of the bicycle showing each generalized coordinate.}(fig:genCoord)


A holonomic configuration constraint, arising from the fact that
both wheels must touch the ground, complicates the model
derivation. The constraint (Eq. eq:wheelsTouch) is characterized by
a nonlinear relationship between the lean angle :math:`$q_4$`,
steer angle :math:`$q_7$` and pitch angle :math:`$q_6$`. Pitch,
:math:`$q_6$`, is taken as the dependent coordinate and the
constraint equation can be formulated into a quartic in the sine of
the pitch {Psiaki1979,PetersonHubbard2007}. To avoid having to
solve the quartic algebraically, the derivative of the constraint
equation is taken.

This produces a velocity constraint equation that is linear in the
derivatives of the pitch angle, steer angle and lean angle
(Eq. eq:pitchVelCon) where :math:`$a$`, :math:`$b$` and :math:`$c$`
are functions of the coordinates and geometric parameters. This
allows an explicit solution for the pitch angular velocity
:math:`$u_6$`, making it a dependent generalized speed.
:math:`$$\bar{\mathbf{r}}^{G_n/C_n}\cdot\hat{\mathbf{n}}_3=f\left(q_4,q_6,q_7\right)=0
\label{eq:wheelsTouch}
$$`
:math:`$$\frac{d}{dt}\left(\bar{\mathbf{r}}^{G_n/C_n}\cdot\hat{\mathbf{n}}_3\right)=a\cdot u_4+b\cdot u_5+c\cdot u_7=0
\label{eq:pitchVelCon}
$$`

Four nonholomic constraints (Eq. eq:noSlip) further reduce the
locally achievable configuration space to three degrees of freedom.
The pure rolling, no side-slip, contact of the knife-edge wheels
with the ground plane requires that there are no components of
velocity of the wheel contact points in the
:math:`${\mathbf{n}}_1$` and :math:`${\mathbf{n}}_2$` directions.
:math:`$$^N\bar{\mathbf{v}}^{C_n}\cdot\hat{\mathbf{n}}_1=
    ^N\bar{\mathbf{v}}^{C_n}\cdot\hat{\mathbf{n}}_2=
    ^N\bar{\mathbf{v}}^{G_n}\cdot\hat{\mathbf{n}}_1=
    ^N\bar{\mathbf{v}}^{G_n}\cdot\hat{\mathbf{n}}_2=0
\label{eq:noSlip}
$$`

Eight generalized coordinates, one of which is dependent, and three
independent generalized speeds (:math:`$u_i=\dot{q}_i$` where
:math:`$i = 4,5,7$`) describe the system. Five of these are
ignorable coordinates (:math:`$q_i$`, :math:`$i = 1,2,3,5,8$`),
that is they do not occur in the dynamical equations of motion. The
nonminimal set of dynamic equations of motion (Eqs. eq:accels
and eq:speeds) were formed by Kane's method. They are nonminimal
because pitch angle, :math:`$q_6$`, was not solved for explicitly.
With this set of equations one must calculate the pitch angle
numerically for its initial condition when simulating and for the
fixed point when linearizing.
:math:`$$\dot{u}_i=f\left(u_4,u_5,u_7,q_4,q_6,q_7\right)\textrm{ where }i=4,5,7
\label{eq:accels}
$$`
:math:`$$\dot{q}_i=u_i\textrm{ where }i=4,5,6,7
\label{eq:speeds}
$$`

The equations of motion can then be linearized by calculating the
Jacobian of the system of equations. The partial derivatives were
evaluated at the following fixed point: :math:`$q_i=0$` where
:math:`$i=4,6,7$`, :math:`$u_i=0$` where :math:`$i=4,7$`, and
:math:`$u_5=-v/R_r$` where :math:`$v$` is the constant forward
speed of the bicycle. This reduces the system to four linear first
order differential equations in the form:
:math:`$$\frac{d}{dt}
    \left[
    \begin{array}{c}
        q_4\\q_5\\q_6\\q_7\\u_4\\u_5\\u_7
    \end{array}
    \right]
    =
    \mathbf{A}
    \left[
    \begin{array}{c}
        q_4\\q_5\\q_6\\q_7\\u_4\\u_5\\u_7
    \end{array}
    \right]
    \label{eq:linearEq}
$$`
{Validation}The linearized model was checked for accuracy against
the benchmark bicycle in two ways. First the linearized equations
of motion (Eq. eq:linearEq) were formulated into two second order
differential equations in the more familiar canonical form
(Eq. eq:canonical) used in {MeijaardPapadopoulosRuinaSchwab2007}.
They present the values for the coefficient matrices
(:math:`$\mathbf{M}$`, :math:`$\mathbf{C}_1$`,
:math:`$\mathbf{K}_0$` and :math:`$\mathbf{K}_2$`) for the
benchmark parameter set at least 15 significant figures and my
model matched all of the significant figures.
:math:`$$\mathbf{M\dot{u}}+v\mathbf{C}_1\mathbf{u}+\left[g\mathbf{K}_0+v^2\mathbf{K}_2\right]\mathbf{q}=0
    \label{eq:canonical}
$$`
The eigenvalues of the system of linear equations can be calculated
and are typically plotted versus forward speed for the linear
upright constant speed configuration (Fig. fig:eigenvalues).
{MeijaardPapadopoulosRuinaSchwab2007}also provided eigenvalue
calculations at various speeds of the benchmark bicycle for model
comparison. The eigenvalues for my model matched to at least 15
significant figures.

        .. figure:: eigenvalues.pdf
           :align: center
           :alt: image
           
           image
        

    {Eigenvalues versus speed for an example bicycle. The four modes of
    motion are identified. \\emph{Caster} is stable and real for all positive
    values of speed. It describes the tendency for the front wheel to right
    itself in forward motion. \\emph{Capsize} is always real, stable at low speeds
    and becomes marginally unstable at a higher speed. It describes the roll of
    the rear frame. \\emph{Weave} is real at very low speeds and describes an
    inverted pendulum-like motion i.e. the bicycle falls over. As speed increases
    the eigenvalues coalesce into a complex conjugate pair that describes a
    sinusoidal motion of the roll and steer, with steer lagging the roll. This
    mode becomes stable at a higher speed. The weave and capsize critical speeds
    bound a stable speed range.}(fig:eigenvalues)


Measurement of Physical Parameters
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

As the studies on bicycle dynamics make clear, all theoretical or
computational models of bicycle dynamics depend crucially on sound
and accurate knowledge of the inertial and geometric parameters of
the vehicle and rider. A non-minimum set of 25 physical parameters
is needed to compute solutions of the equations of motion. I have
developed a method to estimate these from
experiment {MooreKooijmanHubbardSchwab2009}. They are calculated
from the geometry, mass, center of mass locations, and moments of
inertia of both the bicycle and rider. I used the methods described
in {Kooijman2006}for experimentally measuring the properties of the
bicycle but increased the accuracy of the results by using several
different measurement techniques. By combining that method with one
that estimates the rider's physical properties based on
representing the rider as a collection of geometrical shapes one
can obtain an estimate of the parameters for the combined bicycle
and rider.

The necessary geometry was measured with various precision
measurement tools. The masses were determined with a scale. The
centers of mass were measured by hanging the bicycle parts as a
pendulum (Fig. fig:frameCoM) and measuring the distances to the
center of mass about different axes. The moments of inertia were
determined by mounting each body as a torsional pendulum and
measuring the period of oscillation about different axes that ran
through the center of mass in the assumed lateral symmetric plane.
The methods allow one to obtain reasonable estimations of the
parameters used to predict the dynamic modes of the benchmark model
with minimal experimental equipment and effort.

        .. figure:: frameCoM.pdf
           :align: center
           :alt: image
           
           image
        

    {Superimposed photographs of the bicycle frame hanging in three
    orientations as a torsional pendulum showing the center of mass location and
    orientation angles.}(fig:frameCoM)


To estimate the rider's physical properties, basic body geometry
and the total rider mass were measured. Using an uniform density
model of the rider made up of simple geometric shapes
(Fig. fig:parameterModel), empirical body mass
proportions {Dempster1955}and the rider's basic posture dimensions,
the center of mass and moment of inertia of the rider was estimated
using inertia rotation principles and the parallel axis theorem.
This method will be improved by using the more detailed geometrical
model of the human body developed by {Yeadon1990a}.

        .. figure:: parameterModel.pdf
           :align: center
           :alt: image
           
           image
        

    {Simple model of a human used for estimating the physical parameters.}(fig:parameterModel)


Model Extensions
----------------

The Whipple model can be extended in many ways to more accurately
describe the dynamics of a real bicycle, motorcycle or unusual
bicycles. I have modified the Whipple Model to represent two
interesting bicycles: the Gyrobike and the Swing Bike and to verify
that riding on a treadmill has the same dynamics as rider on
stationary ground. {Treadmill}Several of our experiments have been
and will be performed on a treadmill. The first attempts at riding
a bicycle on a treadmill are a bit disconcerting and it leads one
to believe that there may be something different about dynamics on
the treadmill, but this is not the case. The dynamics are the same
as long the treadmill belt has no lateral flex. The reason is
founded in a basic principle of dynamics: observing an object that
is fixed in one frame from a moving frame of reference is no
different than observing the moving object in a fixed frame. I
changed the velocity constraints at the wheels of the Whipple Model
to have a component of velocity in the rearward direction of the
ground plane and confirmed that the equations of motion are in fact
the same. {KooijmanSchwab2009}have also presented experimental
results confirming that an riderless bicycle has the same dynamics
on and off the treadmill. {Gyrobike}The Gryobike is the name of a
commercial stability enhanced bicycle developed by a group of
students at Dartmouth University {Ward2006}. The front wheel of
this bicycle has an extra flywheel inside the wheel that is rotated
by a battery-powered motor. It is designed to make the bicycle more
stable so that it is much easier to learn to ride. I added this
extra flywheel to the theoretical Whipple Model and will construct
a plot of the stable speed range versus angular momentum of the
flywheel in order to better understand the stability enhancement.
{Swing Bike}The Swing Bike was also a commercially available
bicycle manufactured by the Schwinn Bicycle Company in the 70's. It
is normal bicycle modified to have an extra steering axis under the
seat. This adds another degree of freedom to the model and very
unusual steering maneuvers can be performed such as forcing the
wheels to track parallel to each other. Experimentation with an
actual Swing Bike showed that it was possible to ride no-handed and
led me to believe that there may also be speed dependent stability.
Future results will show whether the linearized model is in fact
ever stable.

Rider Dynamics
==============

One of the most glaring inadequacies of the Whipple bicycle model
is the assumption that the rider is rigidly attached to the bicycle
frame. The motions of the rider, with a mass often 80%-90% of the
total system mass, most definitely affect the dynamics. This adds
complexity that other vehicles lack since, in these vehicles, the
human is such a small part of the system mass that human motion has
little, if any, effect on the dynamics. With a bicycle, the
movements of the rider (steering, twisting, leaning, pedaling) all
affect the dynamics of the system and are also used to control the
bicycle. Decisions must be made about what motions are most
influential and which of these to incorporate in an extended model.
An extension of the Whipple model that allows for the most
important motions and movements will be developed based on
experimental observations and measurements. If possible a model
will be developed that does not add any additional degrees of
freedom to the system to keep the order low enough for easier
analytical analysis. {Passive Rider Dynamics}Before any
experimentation I developed a model (Fig. fig:passive) that
included passive rider dynamics and three additional degrees of
freedom. The rider was allow to lean, twist and shift laterally
relative to the rear frame of the bicycle. Each of the three new
degrees of freedom were were constrained by linear springs and
dampers for passive stability. The spring and damping constants
were either taken from literature or estimated. The linear dynamics
about the upright constant forward speed were examined and it was
shown that that the new degrees of freedom caused the weave motion
never to stabilize. This lead me to believe that active control may
always be necessary for riding a bicycle.

        .. figure:: passive.png
           :align: center
           :alt: image
           
           image
        

    {Rider model twist, lean and flexible seat connection.}(fig:passive)


Video Bicycle
-------------

The first step in getting an idea of what a person does on a
bicycle for both passive and active motion is to observe the
behavior. To do this we instrumented a standard city bicycle
(Fig. fig:instruBike) with an on board DAQ system capable of
measuring the bicycle's roll, yaw and steer rates along with steer
angle, cadence pulse and rear wheel speed. We also attached a
rearward facing bullet camera to video the rider relative to the
bicycle frame.

We measured the bicycle dynamics and recorded the rider's motion in
both normal city riding and while performing certain tasks on a
large treadmill. These experiments confirmed the idea that steer
activity decreases as speed increases and that most of the control
seems to be done by steering; little upper body motion was detected
in the stabilization tasks. We expected to find some sign of the
open loop dynamics, in particular the weave eigen-frequency, in the
experimental data. After using a Fast Fourier Transform on the
steering angle data, we found no sign of the open loop dynamics but
did find large effects from the pedaling motion
(Fig. fig:steerAngle). Observation of the video data revealed that,
at low speed, lateral movement of the knees was present and seemed
to be a potential candidate for a control action. These results
were presented in two conference papers: {KooijmanSchwab2008}and
{KooijmanSchwabMoore2009}.

        .. figure:: instruBike.pdf
           :align: center
           :alt: image
           
           image
        

    {Instrumented video bicycle.}(fig:instruBike)


        .. figure:: steerAngle.pdf
           :align: center
           :alt: image
           
           image
        

    {Steer angle amplitude plot for nine different speeds for a normal
    pedaling experiment. The solid vertical line indicates the pedaling frequency
    and the dashed vertical gray line indicates the bicycle \\& rigid rider open
    loop weave eigen-frequency predicted by the linear model
    (Fig.~\\ref{fig:eigenvalues}).}(fig:steerAngle)


Motion Identification
---------------------

The video observations showed that the rider used the upper body
very little when performing normal maneuvers and that the bicyclist
may in fact primarily use steering input for control. They also
revealed that other motions such as lateral movement of the knees
were used in low speed stabilization. In order to validate the
hypothesis that there is little upper body motion during casual
cycling, an in-depth motion capture analysis was performed on the
bicycle and rider system {MooreKooijmanSchwab2009}. We used motion
capture technology to record the motion of three similar young
adult male riders riding two different city bicycles on a
treadmill. Each rider rode each bicycle while performing stability
trials at speeds ranging from 2 km/h to 30 km/h: stabilizing while
pedaling normally, stabilizing without pedaling, line tracking
while pedaling, and stabilizing with no-hands. These tasks were
chosen with the intent of examining differences in the kinematics
at various speeds, the effects of pedaling on the system, upper
body control motions and the differences in tracking and
stabilization.

Principal component analysis was used to transform the marker
position data into a manageable set organized by the variance
associated with the principal components. A GUI was developed to
visualize the results of the analysis (Fig. fig:GUI). These
principal components were used to characterize various distinct
kinematic motions that occur during stabilization with and without
pedaling. These motions were grouped on the basis of correlation
and conclusions were drawn about which motions are candidates for
stabilization related control actions.

        .. figure:: GUI.pdf
           :align: center
           :alt: image
           
           image
        

    {Screen shot of the \\textsc{Matlab} graphical user interface (GUI)
        used to visualize principal components and compare between different
        components and trials.}(fig:GUI)


The following conclusions were made from the analysis on the
measured rider motions during normal bicycling by means of
principal component analysis:


-  During normal bicycling the dominant upper body motions: lean,
   bend, twist and bounce, are all linked to the pedaling motion.

-  Lateral control is mainly done by steering since we observed
   only upper body motion in the pedaling frequency.

-  If upper body motions are used for control then this control is
   at the pedaling frequency.

-  When pedaling at low speed we observed lateral knee motions
   which are probably also used for control.


Future results will look into different methods of data processing
that incorporate physically relevant kinematic and dynamic
information such as scaling the data before the principal component
analysis. The data from these experiments will also be used to
define a biomechanical model of the rider that will include the
major motions observed in the experiments.

Human Control
=============

The study of bicycle and motorcycle control has typically been
based on control-theoretic principles and model
development {AstromKleinLennartsson2005,YamakitaUtano2005,Sharp2007,PetersonHubbard2008,SchwabKooijmanMeijaard2008,ThanhParnichkun2008,Sharp2008}.
These techniques have been applied to robot bicycles with varying
levels of
success {SuryanarayananTomizukaWeaver2002,TanakaMurakami2004,YamakitaUtanoSekiguchi2006,Murata2009}but
these models tend to offer little in understanding how a human
rider actually controls a bicycle. It is important to understand
that the human may not follow many of the typical control
strategies. Since the human operator is such a key component to the
system, study of these strategies may not shed much light on
bicycle handling qualities or give more structure to bicycle design
principles.

Analytical methods of predicting handling qualities of both
aircraft and automobiles have been developed based on manual
control theory {McRuerKlein1976,ModjtahedzadehHess1993}. There have
been relatively few attempts to study bicycle and motorcycle
control from a manual control-based perspective. Among these are
the development of a model of the bicycle rider via measurements
from a rider-in-the-loop simulator {LunterenStassen1970a}, the
development of a PD control model with a time delay and lag
compensation {RolandLynch1972}, the development of a manual control
model for a motorcycle and rider {Weir1972,Weir1973}and the work on
motorcycle rider interaction by {Eaton1973}which is based on models
in Weir's thesis. We will build on these models and the large
volume of research on manual control from the aircraft control
realm. {Manual Control Theory}Manual control theory has its roots
in machine gun turret human-in-the-loop systems but has been
expanded to many other important systems with human operators such
as aircraft, automobiles and motorcycles. Basic manual control
theory attempts to model the human as a quasilinear system so that
classical analysis can be employed. It turns out that a basic
linear description with gain plus lead and lag and a time delay can
successfully describe the human operator. It has been shown that
when this description is combined with most controlled elements it
takes on a common form that is called the crossover model. The
crossover model conforms to the desirable characteristics of a
compensator and controlled element. That is that the slope of the
amplitude of the open-loop transfer function in a Bode plot is
-20dB/decade around the crossover frequency and that there is
adequate phase margin at the crossover frequency. If higher
fidelity is required, the model will be expanded to a multi-loop
model that includes all of the sensory feedback needed for robust
bicycle control; namely visual, proprioceptive and vestibular. The
model will be expanded to one with more controlled element dynamics
that includes the central nervous, neuromuscular, and vestibular
systems explicitly as used in {ModjtahedzadehHess1993}.
{Variable Stability Bicycle}An instrumented variable stability
bicycle will be designed in collaboration with Dale Peterson for
both of our experimental studies. The purpose of the bicycle will
be many fold and it will have these features:


-  Sensors capable of measuring many of the states of the bicycle
   including angle, rate and acceleration sensors.

-  Wireless on-board data acquisition and control computer

-  An electric rear wheel hub motor capable of propelling the
   bicycle at constant speeds from 1 to 30 km/h.

-  A removable controlled pendulum representative of the human's
   leaning body mass.

-  A decoupled steering controller capable of autonomously
   controlling the bicycle and designed as a steer-by-wire system with
   stability augmentation capabilities.

-  A removable harness capable of restraining major upper body
   movements relative to the bicycle frame.


System Identification
---------------------

The accuracy of the manual control model will be verified by
experiment using the variable stability bicycle. Riders will ride
the bicycle on a treadmill at various speeds and attempt to simply
stabilize the bicycle under controlled perturbations. Simulations
of the manually controlled bicycle under the same perturbations
will be compared to the experimental data. The parameters of the
manual control model will be tuned to get a statistically relevant
match in similar fashion to the studies in {HessZeyadaHeffley2002}.
If the tuning does not easily converge on adequate parameter values
then we will use more traditional system identification techniques
that take advantage of numerical optimization techniques.
{apalike}{bicycle}





<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Motion Capture &mdash; Human Control of a Bicycle: Jason K. Moore</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Human Control of a Bicycle: Jason K. Moore" href="index.html" />
    <link rel="next" title="Davis Instrumented Bicycle" href="davisbicycle.html" />
    <link rel="prev" title="Delft Instrumented Bicycle" href="delftbicycle.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Human Control of a Bicycle: Jason K. Moore</span></a></h1>
        <h2 class="heading"><span>Motion Capture</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="delftbicycle.html">Delft Instrumented Bicycle</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="davisbicycle.html">Davis Instrumented Bicycle</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        

  <div class="section" id="motion-capture">
<h1>Motion Capture<a class="headerlink" href="#motion-capture" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This document is a draft which is updated regularly (Last updated January 03, 2012 at 15:53:28 PST).
Once I submit if for my doctoral degree at UC Davis, it will be done. So for
now use at your own risk. The information may or may not be correct.
Reviews, comments and suggestions are welcome.</p>
</div>
<div class="section" id="preface">
<h2>Preface<a class="headerlink" href="#preface" title="Permalink to this headline">¶</a></h2>
<p>Sometime during the winter of 2008, Arend proposed our next project while I was
at Delft. I had told him that I wanted to have a project to call my own while I
was there, that could be written up as a major portion of my dissertation and
he proposed doing a motion study using principal components techniques in much
the same fashion as [Troje2002] had done with walking subjects. I think he&#8217;d
formulated the idea in discussion with Andy Ruina, his longtime vacation buddy
and colleague. I&#8217;d never heard of principal components (my statistics was and
is still weak), so I started reading up on principal components and what Troje
had done with walkers. I got a grasp of the technique and formulated a plan
based around a bicyclist riding on the large treadmill we had access to and
capturing their kinematics with a motion capture system. We went up for a
preliminary test day to check out the motion capture system and meet Richard
Casius who was the lab technician that knew the equipment. I was expecting he&#8217;d
just show us the on/off button and make sure we didn&#8217;t break anything, but he
actually was there to run the system, help us figure it all out, and even do
some post processing of the data. This was odd for me, as my experience in the
U.S. was always that I had to do <em>everything</em> myself. Jodi was the rider for
the preliminary tests. It went well and we felt confident that we&#8217;d get the
kind of data we wanted. So we came back and started planning for three days of
testing with three riders. Jodi and I were going to ride and my fixie friend,
Victor, agreed to ride for us one day too. We had three successful days of
testing and then Jodi and I began analyzing the data with him coding a
visualization GUI that we&#8217;d devised and me processing the data using the PCA
methods. Once we could <em>see</em> the data, we went through every run manually and
tried to build a data set of observations.</p>
<p>I got frustrated at this point, because we&#8217;d finally got to the results part
and it seemed to me that Jodi and Arend we taking over the results part. I felt
as if I&#8217;d put all my 100% effort into the work up to that point and because I
had this notion of ownership of the final product it seemed as if my colleagues
were getting to do the grand finale, where as I wanted to be in control. We
made it through it though, despite my discontent. Arend and Jodi didn&#8217;t really
understand my frustations and deemed it a cultural difference. I didn&#8217;t buy
that then, but now reflecting I tend to agree. My upbringing and school
training left me with little experience with <em>true</em> teamwork and I&#8217;ve had my
eye on the PhD dissertation as some kind of embodiment of my personal
understanding of <em>everything</em> that has to do with the subject I&#8217;ve been
studying. I had never really seen it as a collection of many people&#8217;s effort
and the result being my orchestration of the collective ideas. These kinds of
realizations are what the heart the Fulbright grant is. I went into the grant
thinking more about accomplishing the research goals that I proposed to do, but
after the fact I realize that cultural understanding and personal interactions
allowed me to grow a person and realize teh world in a more gloabl sense than
any of the research accomplishments did. That kind of foresifth from the
founders of grants like these are invaluable to humanity as a whole. I wish
every high school student or college student in the U.S. was required to study
abroad. I think the politcal climate we see in the world would be greatly
affected.</p>
<p>Another tactic that was new to me was sending in an abstract for a conference
that really only talked about what we tend to do with the idea that it gives
you a deadline to get something done. This worked well here, but I can&#8217;t say
that it has been succesful for me since. We first presented the results of this
study at the ECCOMAS Multibody Dynamics conference in June of 2009 and I think
it went pretty well [Moore2009].</p>
<p>After the conference, the paper was selected to be published in the Multibody
System Dynamics journal. I turned it down because Arend was more interested in
publishing to the Journal of Biomechanics.  But I had recently been learning a
lot about the open science movement and knew that our University currently had
an agreement with Springer that the open access fee would be waived for all
articles published by UCD affliates and Multibody System Dynamics is a Springer
journal. So I decided that would be the better choice, as journal titles seem
like they are more and more irrelevant for my generation. We search for
articles on the internet and read them regardless of where they published, the
filtering of quality content is becoming an entirely different mechanism as it
was for science in previous generations. I see the journal as a soon to be lost
relic. The peer review may be consusmed by collective quality control by the
readers.</p>
<p>The work in this Chapter comes from two sources, the first is the peer reviewed
Mutlibody System Dynamics article, [Moore2011], of which I&#8217;ve copied verbatim.
The second is an addendum to the results which was presented at the ISEA 2010
conference in Austria [Moore2010]. It is a lead in to looking at the data with
some other statiscal tools of which I&#8217;ve had a growing interest in, but less
that adqequate understanding.</p>
</div>
<div class="section" id="experiment-design">
<h2>Experiment Design<a class="headerlink" href="#experiment-design" title="Permalink to this headline">¶</a></h2>
<p>We performed a wide range of manuevers with three different riders at several
speeds. The aim of this section is to provide a detailed description of the
experiments and the accompanying data.</p>
<p>The experiments were performed in a controlled environment while the motion of
the bicycle and rider were measured with an active motion capture system
[Northern2009]. The rider rode on a <span class="math">\($3\times5$\)</span> meter treadmill,
(Figure <a class="reference internal" href="#figmarkers"><em>Rider 1 and the Batavus Stratos Deluxe with marker positions.
Body marker positions visible from the rear.</em></a>) capable of belt speeds up to 35 km/h.  Three male
riders of similar age [23, 26, 31 years] and build [height (1.84, 1.83, 1.76 m)
and mass (74, 72, 72 kg)] participated as subjects.  Each rode two different
Dutch bicycles. Each rider performed all runs in one day in the same order (no
randomization) and was instructed to bicycle comfortably at a constant speed in
the range of 2 to 30 km/h for the duration of the run. There were at least 2
repetitions of each speed with each bicycle. A run was sampled at a frequency
of 100 Hz for 60 seconds.</p>
<div class="section" id="equipment">
<h3>Equipment<a class="headerlink" href="#equipment" title="Permalink to this headline">¶</a></h3>
<p>All of the experiments were performed on a 3x5 m treadmilll at the the Vrije
Unitversetiet over a three day period. The treadmill had a 1% incline. We used
two bicycle donated by Batavus: the Browser and the Stratos Deluxe. The three
riders were all in their twenties, male and of similar build and athletic
ability.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Find the direction and magnitude of the treadmill incline.</p>
</div>
</div>
<div class="section" id="manuevers">
<h3>Manuevers<a class="headerlink" href="#manuevers" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Normal</dt>
<dd>For the &#8220;normal&#8221; bicycling task we instructed the riders to focus their
sight into the distance and simply stabilize the bicycle and keep the
heading generally pointing in the direction of the treadmill band velocity.
Thus they were required to keep the bicycle roll angle and heading angle
at zero. The rider pedaled during the experiment and was told to ride as if
you were traveling down a straight empty road.</dd>
<dt>Towed</dt>
<dd>The towed experiments were the same as the normal except that a rope was
attached to the headtube of the bicycle and attached to the front railing of
the treadmill. This allowed the rider to not have to pedal. The rider keep
the cranks horizontal and was left to choose which foot he wanted forward.
The rope could potentially applied lateral forces to the frame if the rider
drifted too much laterally. We may have held the rope and moved left and
right.</dd>
<dt>Line tracking</dt>
<dd>The line tracking manuever was the same at the normal manuever except that
the rider was instructed to keep his front wheel on a line we drew on the
treadmill. This caused the rider to focus on not only stabilization but
lateral deviation control.</dd>
<dt>No-hand</dt>
<dd>We did some experiments with no hand riding (i.e. no steering control). The
rider&#8217;s placed their hands on their hips and attempted to stablize roll and
yaw. Most of the these runs were with pedaling, but a few were taken with
towing.</dd>
</dl>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Did we tie off the tow rope or did Arend hold it and move laterall
with the bicycle?</p>
</div>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">include parameters for the riders</p>
</div>
<p>The primary data was the three dimensional locations of the 31 markers for each
run. We sampled at 100 hz, giving 31 markers * 3 coordinates * 100 hz * 60
seconds = 558,000 data points per each one minute run. We collected data for
268 one minute runs and 3 shorter static measurements of the bicycles for a
total of 271. The data for the first rider ended up somewhat corrupted. There
are a lot of irractic value changes in the data. The basic motion is there
though and clever filtering could clean the data for use.</p>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">Preliminary data day and tv show day data.</p>
</div>
</div>
<div class="section" id="source-code">
<h3>Source Code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h3>
<p>The original data was processed with a series of Matlab scripts and then the
resulting processed data files were viewed with a Matlab program.</p>
<p>The source code can be found at
<a class="reference external" href="http://github.com/moorepants/MotionCapture">http://github.com/moorepants/MotionCapture</a>.</p>
<div class="admonition-todo admonition" id="index-4">
<p class="first admonition-title">Todo</p>
<p class="last">Write a detailed readme about the files.</p>
</div>
</div>
</div>
<div class="section" id="principal-component-analysis">
<h2>Principal Component Analysis<a class="headerlink" href="#principal-component-analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="abstract">
<h3>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h3>
<p>Recent observations of a bicyclist riding through town and on a treadmill show
that the rider uses the upper body very little when performing normal maneuvers
and that the bicyclist may, in fact, primarily use steering input for control.
The observations also revealed that other motions such as lateral movement of
the knees were used in low speed stabilization. In order to validate the
hypothesis that there is little upper body motion during casual cycling, an
in-depth motion capture analysis was performed on the bicycle and rider system.</p>
<p>We used motion capture technology to record the motion of three similar young
adult male riders riding two different city bicycles on a treadmill. Each rider
rode each bicycle while performing stability trials at speeds ranging from 2
km/h to 30 km/h: stabilizing while pedaling normally, stabilizing without
pedaling, line tracking while pedaling, and stabilizing with no-hands. These
tasks were chosen with the intent of examining differences in the kinematics at
various speeds, the effects of pedaling on the system, upper body control
motions and the differences in tracking and stabilization.</p>
<p>Principal component analysis was used to transform the data into a manageable
set organized by the variance associated with the principal components. In this
paper, these principal components were used to characterize various distinct
kinematic motions that occur during stabilization with and without pedaling.
These motions were grouped on the basis of correlation and conclusions were
drawn about which motions are candidates for stabilization-related control
actions.</p>
</div>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Much progress has been made in understanding the rigid body dynamics of an
uncontrolled bicycle ([Meijaard2007], [Kooijman2008]) and various control
schemes have been explored for tracking purposes ([Peterson2008a],
[Schwab2008], [Sharp2008a]), but little is understood about how a bicyclist
actually stabilizes a bicycle during normal riding. A bicycle and rider system
is unique among vehicles in that the rider is from 80 to 90% of the total mass
of the system, the system is laterally unstable, and the rider is flexibly
coupled to the bicycle in such a way that many body motions can be used as
control inputs.  Previous research into realistic bicycle control has focused
on both steering and rider lean as control inputs, but there has been no
experimental verification of which motions a rider actually uses for control.
Recent observations of a bicyclist riding through town and on a treadmill
[Kooijman2009a] show that the rider moves the upper body very little when
performing normal maneuvers and that the bicyclist may, in fact, primarily use
steering input for control. This corresponds well with the fact that control by
leaning requires high gains compared to the gains required for steering when
employing an optimal control strategy on a model ([Peterson2008a],
[Schwab2008], [Sharp2008a]). The observations also revealed that the rider
may use other control inputs such as drastic knee movements at low speeds.
These conclusions were drawn by visually reviewing video data, so a more
rigorous objective method of characterizing the dominant movements of the
bicyclist while stabilizing a bicycle was needed. In order to validate the
hypothesis that there is little upper body motion during normal cycling, motion
capture techniques were used on the bicycle and rider system with the intent to
use principal component analysis to identify the major motion patterns.</p>
<p>Principal component analysis has successfully been used with data collected
from motion capture techniques to identify the dominant modes of motion of a
person walking on a treadmill [Troje2002] and to characterize different types
of walking.  We use similar methods for steady, normal bicycle riding on a
treadmill. Cyclic motions, such as pedaling, are easily identified and
separated from the other less cyclic control actions. Identifying the patterns
of movement gives insight into which body movements are primarily used and are
candidates for control inputs.  This will be valuable for our overall research
goals that includes the design of a realistic biomechanical-based control
system of a bicycle rider, among other things.</p>
</div>
<div class="section" id="experiments">
<h3>Experiments<a class="headerlink" href="#experiments" title="Permalink to this headline">¶</a></h3>
<p>To test our hypotheses, three riders performed a set of stability tasks in a
controlled environment while the motion of the bicycle and rider were collected
with a motion capture system. The tasks were performed on a <span class="math">\(3\times5\)</span>
meter treadmill Figure <a class="reference internal" href="#figtreadmill"><em>figTreadmill</em></a> capable of belt speeds up to 35 km/h.
The treadmill was chosen because the envelope of space was suitable for the
motion capture system and it eliminated any disturbances such as wind, rough
ground, and obstacles. We chose three male riders of similar age [31, 23, 26
years], build [height (1.76, 1.84, 1.83 m) and mass (72, 74, 72 kg)]. We also
used two different Dutch bicycles: a 2008 Batavus Browser with a 3 speed hub
and a 2008 Batavus Stratos Deluxe with a 7 speed hub.  The Browser is described
by the manufacturer as “stable” and the Stratos Deluxe as “nervous.”</p>
<div class="figure" id="figtreadmill">
<img alt="_images/treadmill.png" src="_images/treadmill.png" style="width: 4.69in;" />
<p class="caption">figTreadmill</p>
<div class="legend">
The <span class="math">\(3\times5\)</span> m treadmill at the Vrije Universiteit Amsterdam.</div>
</div>
<p>We made use of the Optotrak Certus Motion Capture System [Northern2009] to
record the motion of the bicycle and rider during the stability tasks. The
system is based on active infrared emitting markers that are placed on the
moving bodies and connected to a central control unit. Each marker emits a
sequential infrared signal and the infrared pulses are captured by camera
modules each containing three cameras. The accuracy of the three dimensional
measurements is <span class="math">\(\pm0.15\)</span> mm [Northern2009]. The system has no hardware
based noise reduction. Wiring harnesses were built for both the rider and the
bicycles to facilitate easy bicycle and rider exchange Figure
<a class="reference internal" href="#figmarkers"><em>Rider 1 and the Batavus Stratos Deluxe with marker positions.
Body marker positions visible from the rear.</em></a>.</p>
<table border="1" class="docutils" id="figmarkers">
<caption>Rider 1 and the Batavus Stratos Deluxe with marker positions.
Body marker positions visible from the rear.</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="figJodiBikeMarkers" src="_images/jodi-bike-markers.jpg" style="width: 3.35667in;" /></td>
<td><img alt="figJodiMarkers" src="_images/jodi-markers.jpg" style="width: 1.77667in;" /></td>
</tr>
</tbody>
</table>
<p>The marker coordinates were measured with respect to an inertial frame,
<span class="math">\(\mathbf{M}\)</span>, where the plane normal to <span class="math">\(\hat{\mathbf{m}}_3\)</span> is
coplanar with the treadmill surface and <span class="math">\(\hat{\mathbf{m}}_3\)</span> is directed
upward. We collected the three dimensional locations of 31 markers, 11 of which
were located on the bicycle and 20 that mapped the rider
Figure <a class="reference internal" href="#figmarkerlocation"><em>figMarkerLocation</em></a>.</p>
<div class="figure" id="figmarkerlocation">
<img alt="_images/marker-location.png" src="_images/marker-location.png" style="width: 3in;" />
<p class="caption">figMarkerLocation</p>
<div class="legend">
Schematic of the marker positions. The rider and bicycle are colored light
gray and dark gray, respectively.</div>
</div>
<p>The markers were placed on the bicycle so that we could easily extract the
rigid body motion (i.e. body orientations and locations) of the bicycle frame
and fork. Four markers were attached to the fork and seven markers were
attached to the rear frame. A marker was attached on the right and left sides
of the center of each wheel, the seat stays, the ends of the handlebars, and
the head tube. A single marker was also attached to the back of the seat post.</p>
<p>We recorded the locations of 20 points on the rider Figure
<a class="reference internal" href="#figmarkerlocation"><em>figMarkerLocation</em></a>: left and right sides of the helmet near the temple,
back of the helmet, shoulders (greater tuberosity of the humerus), elbows
(lateral epicondyle of the humerus), wrists (pisiform of the carpus), between
the shoulder blades on the spine (T6 of the thoracic vertebrae), the tail bone
(coccyx), midpoint on the spine between the coccyx and shoulder blades (L1 on
the lumbar vertebrae), hips (greater trochanter of the femur), knees (lateral
epicondyle of the femur), ankles (lateral malleolus of the fibula) and feet
(proximal metatarsal joint). The body markers were not necessarily placed such
that a complete rigid body model could easily be fit to the data. This was done
to save setup and processing time because we only wanted a stick figure
representation of the rider that allowed us to visually observe the dominant
motions of the rider.</p>
<p>The stability tasks were designed such that the rider would ride at a constant
speed within the range of 2 to 30 km/h. The bicyclists were told to maintain an
upright straight-ahead course on the treadmill and to look into the distance,
with exception of the line tracking task. The bicyclists were instructed to
bicycle comfortably at the designated speed and data recording was started at
random. In all cases the subject rode at the set speed until comfortable, then
data was taken for 60 seconds at a 100 hertz sampling rate. Each test was
performed on each bicycle with each rider. The following list describes the
various tests:</p>
<dl class="docutils">
<dt>Normal pedaling</dt>
<dd>The subject was instructed to simply stabilize the bicycle while pedaling
and keep the heading in approximately the forward direction. The speed
started at 5 km/h and increased in 5 km/h increments up to 30 km/h. The
speeds were then decreased in the same fashion to 5 km/h. From then on the
speed was decreased in 1 km/h increments until the subject was not able
stabilize the bicycle any longer. Therefore, there were two sets of data
for each speed and each bicycle except speeds below 5 km/h. Several
additional runs were also performed with the rider pedaling using a
different gear and thus a different cadence.</dd>
<dt>Without pedaling</dt>
<dd>This was the same as the normal pedaling task except that a string was
attached to the head tube of the bicycle such that the bicycle was fixed
longitudinally relative to the treadmill and no pedaling was required. The
rider kept the feet in the same position throughout the task.</dd>
<dt>No-hands</dt>
<dd>The riders stabilized the bicycle without using steering for control. They
were instructed to keep their hands on their hips while bicycling. The
rider started at 30 km/h and decreased in 5 km/h increments through 20 km/h
and thereafter the speeds were decreased in 1 or 2 km/h increments until
the rider was not able to comfortably stabilize the bicycle.</dd>
<dt>Line tracking</dt>
<dd>This was the same as normal pedaling except that the rider was instructed
to track a line on the treadmill surface with the front wheel. A smaller
subset of speeds was performed.</dd>
</dl>
<p>These tasks were designed with the intent to answer several questions:</p>
<ol class="arabic simple">
<li>What upper body motions are used while bicycling?</li>
<li>How does the system motion change with respect to changes in forward
speed?</li>
<li>How does pedaling influence the control actions?</li>
<li>Can the open loop rigid body dynamics be detected in the controlled
state?</li>
<li>What does the rider do differently to control the bicycle when riding
no-hands?</li>
<li>Do different bicyclists perform similar motions while performing the
same task?</li>
<li>Is there a difference in motion when stabilizing and trying to track
a line?</li>
</ol>
<p>Since there is no room to address all of these questions in this chapter, we
focus on a single rider on the Browser bicycle and two of the tasks: normal
pedaling and without pedaling. We were able to draw some conclusions on
questions 1 through 4 with this smaller data set.</p>
</div>
<div class="section" id="open-loop-rigid-body-dynamics">
<h3>Open loop rigid body dynamics<a class="headerlink" href="#open-loop-rigid-body-dynamics" title="Permalink to this headline">¶</a></h3>
<p>One question we have is whether or not the eigenfrequencies of the weave motion
for the uncontrolled system can be detected in the results from the
stabilization tasks. In order to predict the uncontrolled (open loop)
eigenvalues of the rigid rider system, the basic geometry, mass, center of
gravity locations, and moments of inertia of the bicycle were measured. Also,
the riders were measured and weighed such that the body segment geometry, mass,
center of gravity locations, and moments of inertia could be estimated. The
physical parameter estimation methods are described in [Moore2009a]. This data was used
to calculate eigenvalues and eigenvectors of the uncontrolled open loop system
Figure <a class="reference internal" href="#figeigplot"><em>figEigPlot</em></a>.</p>
<div class="figure" id="figeigplot">
<img alt="_images/eig-plot.png" src="_images/eig-plot.png" style="width: 7in;" />
<p class="caption">figEigPlot</p>
<div class="legend">
Eigenvalues of the Browser bicycle with the third rider rigidly
attached as a function of speed. Note that the initially unstable
weave motion becomes stable above 16 km/h, the weave speed.</div>
</div>
</div>
<div class="section" id="data-processing">
<h3>Data processing<a class="headerlink" href="#data-processing" title="Permalink to this headline">¶</a></h3>
<div class="section" id="missing-markers">
<h4>Missing markers<a class="headerlink" href="#missing-markers" title="Permalink to this headline">¶</a></h4>
<p>The Optotrak Certus Motion Capture System [Northern2009] is based on the
cameras’ ability to detect the infrared light from the sensors so there are
occasional gaps in the coordinate data due to the markers going out of view. We
attempted to minimize this by careful marker and camera placement but were not
able to totally eliminate the error. Any missing markers on the bicycle were
reconstructed using the fact that the bicycle is a rigid body. We had more than
three markers on both the frame and fork, so if one marker location was not
detected we used the relative location of the remaining markers to reconstruct
the missing marker. The gaps in the data of the markers on the human were
repaired by fitting a cubic spline through the data. The spline estimated the
marker coordinates during the gaps. We only used the splined data if the gaps
were less than 10 time steps, or 0.1 sec; otherwise the trials were discarded.</p>
</div>
<div class="section" id="relative-motion">
<h4>Relative motion<a class="headerlink" href="#relative-motion" title="Permalink to this headline">¶</a></h4>
<p>We were interested in the analysis of three different marker combinations: the
bicycle alone, the rider alone and the bicycle and rider together. The motion
of the bicycle and the bicycle-rider were calculated with reference to the
<span class="math">\(\mathbf{N}\)</span> inertial frame[1] {The <span class="math">\(\mathbf{N}\)</span> frame is used
instead of the <span class="math">\(\mathbf{M}\)</span> frame to comply with the vehicle coordinate
standards used in [Meijaard2007] . See Appendix <em class="xref std std-ref">inFrames</em> for the
derivation.} and the motion of the rider was calculated with respect to the
rear frame of the bicycle <span class="math">\(\mathbf{B}\)</span> Figure <em class="xref std std-ref">figFrames</em>. These
three marker combinations allowed us to differentiate more easily between rider
specific and bicycle specific motions. Furthermore, six of the variables that
describe the configuration of the bicycle in time were calculated to give
insight into the rigid body dynamics. The configuration variables <span class="math">\(q_1\)</span>
and <span class="math">\(q_2\)</span> locate the contact point of the rear wheel of the bicycle. The
<span class="math">\(\mathbf{B}\)</span> frame captures the yaw (<span class="math">\(q_3\)</span>) and roll (<span class="math">\(q_4\)</span>)
motions of the bicycle frame, the <span class="math">\(\mathbf{D}\)</span> frame is an intermediate
frame that differs from <span class="math">\(\mathbf{B}\)</span> only by the bike’s headtube angle
(<span class="math">\(\lambda\)</span>), and the <span class="math">\(\mathbf{E}\)</span> frame captures the steering angle
(<span class="math">\(q_7\)</span>) of the bicycle fork relative to the bicycle frame. The pitch of
the bicycle frame (<span class="math">\(q_6\)</span>) is assumed to be zero. Details of these
calculations are shown in Appendix <em class="xref std std-ref">inFrames</em>.</p>
<div class="admonition-todo admonition" id="index-5">
<p class="first admonition-title">Todo</p>
<p class="last">should lambda be steer axis tilt or headtube angle?
be calculated with Equation <a href="#equation-eqC">(1)</a>.</p>
</div>
<div class="math" id="equation-eqC">
<span class="eqno">(1)</span>\[\mathbf{C}=\frac{1}{n-1}\bar{\mathbf{P}}\bar{\mathbf{P}}^T\]</div>
<p>Calculating the eigenvectors <span class="math">\(\mathbf{v}_i\)</span> and eigenvalues
<span class="math">\(\lambda_i\)</span> of the covariance matrix effectively transforms the space to
one where the variances are maximized and the covariances are zero. The
eigenvectors are the principal components of the data set and the corresponding
eigenvalues represent the variance of each principal component. The
eigenvectors are ordered by decreasing eigenvalue where <span class="math">\(\mathbf{v}_1\)</span> is
the eigenvector corresponding to the largest eigenvalue. The eigenvalues and
eigenvectors are calculated by finding the independent solutions to Equation
<a href="#equation-eqEig">(2)</a>.</p>
<div class="math" id="equation-eqEig">
<span class="eqno">(2)</span>\[\mathbf{C}\mathbf{v}_i=\lambda_i\mathbf{v}_i\]</div>
<p>Each time step can now be represented as a linear combination of the principal
components.</p>
<div class="math" id="equation-eqLinComb">
<span class="eqno">(3)</span>\[\mathbf{p}_j=\mathbf{u}+a_{1j}\mathbf{v}_1+a_{2j}\mathbf{v}_2+
\ldots+a_{mj}\mathbf{v}_m\]</div>
<p>The coefficients <span class="math">\(a_{ij}\)</span> can be solved for each time step <span class="math">\(j\)</span> by
reformulating Equation <a href="#equation-eqLinComb">(3)</a> and solving the system of linear
equations.</p>
<div class="math" id="equation-eqSystem">
<span class="eqno">(4)</span>\[\begin{split}\mathbf{P}-\mathbf{u}\mathbf{h}^T=
\left[\begin{array}{cccc}
| &amp; | &amp; &amp; | \\
\mathbf{v}_1 &amp; \mathbf{v}_2 &amp; \ldots &amp; \mathbf{v}_m\\
| &amp; | &amp; &amp; |
\end{array}\right]
\left[\begin{array}{ccc}
a_{11} &amp; \ldots &amp; a_{1n}\\
\vdots &amp; \ddots &amp; \vdots\\
a_{m1} &amp; \ldots &amp; a_{mn}
\end{array}\right]
=\mathbf{V}\mathbf{A}\end{split}\]\[\mathbf{A}=\mathbf{V}^{-1}(\mathbf{P}-\mathbf{u}\mathbf{h}^T)\]</div>
<p>With the principal components <span class="math">\(\mathbf{v}_i\)</span> being constant, the behavior
in time is described by the coefficients <span class="math">\(a_{ij}\)</span> where the
discretization in time is indexed by <span class="math">\(j\)</span>. The order of the system can be
reduced by eliminating principal components that have little variance. We
arbitrarily decided to examine the first <span class="math">\(k=10\)</span> principal components
knowing that the first five would be based around the larger motions such as
pedaling and that the remaining five may reveal some of the motions associated
with control. The variance of each component,
<span class="math">\(\textrm{var}(\mathbf{a}_i)=\lambda_i\)</span>, is summed to determine the
cumulative percentage of variance of the principal components, <span class="math">\(g_k\)</span>.</p>
<div class="math" id="equation-eqGk">
<span class="eqno">(5)</span>\[g_k=100\frac{\sum_{i=1}^k\lambda_i}{\sum_{i=1}^m\lambda_i}
\textrm{ where }1\leq k\leq m\]</div>
<p>Highly correlated data will show that even when <span class="math">\(k&lt;&lt;m\)</span>, <span class="math">\(g_k\)</span> is
close to 100%. Using 10 components <span class="math">\(g_{10}\)</span> covers 100%
(<span class="math">\(\sigma=2\cdot10^{-14}`%) of the variation in the data for the bicycle,
rider and bicycle-rider. The matrix :math:\)</span>mathbf{A}` can then be reduced to a
<span class="math">\(k\times n\)</span> matrix and eigenvectors greater than <span class="math">\(\mathbf{v}_k\)</span> can
be eliminated.</p>
</div>
<div class="section" id="data-visualization">
<h4>Data Visualization<a class="headerlink" href="#data-visualization" title="Permalink to this headline">¶</a></h4>
<p>We developed a graphical user interface, “GUI”, in Matlab that easily allows
different trials to be compared with one another Figure <a class="reference internal" href="#figgui"><em>figGUI</em></a>. The
program loads in two different trials along with information on each trial. A
graphical representation of the rider and bicycle are displayed in two adjacent
screens and can be viewed from multiple perspectives. The animations of the
runs can be played at different speeds, rewound and fast forwarded. The
principal components are shown beside the corresponding animation display and
combinations can be turned on and off for identification and comparison.
Frequency and amplitude information for the temporal coefficients
<span class="math">\(a_{ij}\)</span> can also be displayed for comparison.</p>
<div class="figure" id="figgui">
<img alt="_images/GUI.png" src="_images/GUI.png" style="width: 11.69in;" />
<p class="caption">figGUI</p>
<div class="legend">
Screen shot of the Matlab graphical user interface (GUI) used to visualize
principal components and compare between different components and trials.</div>
</div>
<div class="admonition-todo admonition" id="index-6">
<p class="first admonition-title">Todo</p>
<p class="last">Add video of the GUI in action.</p>
</div>
</div>
</div>
<div class="section" id="results">
<h3>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h3>
<div class="section" id="motion-identification">
<h4>Motion identification<a class="headerlink" href="#motion-identification" title="Permalink to this headline">¶</a></h4>
<p>The reduced set of data provides two important pieces of information for the
identification of motion: the principal components <span class="math">\(\mathbf{v}_i\)</span> and the
corresponding coefficients <span class="math">\(a_{ij}\)</span>. The principal components represent
linear trajectories of the markers and the coefficients show how the markers
follow the trajectories with time. We began processing the data by reviewing
each principal component of each trial in the GUI and noting what type of
motion we saw Table <a class="reference internal" href="#tabtrialdesc"><em>Example raw trial description for the bicycle and rider during
normal pedaling at 10 km/h.</em></a>. These descriptions were subjective
because we grouped marker movement based on our preconceived understanding of
rider and bicycle motion. Some of the components displayed motions that were
not physically possible such as the upper leg stretching in length during the
knee bounce. This is possible when examining a single component but when
superimposed over the rest of the components the unrealistic motions are not
present. Furthermore, for each component we examined amplitude and frequency
content of the associated coefficients <span class="math">\(a_{ij}\)</span> as shown in Figures
<a class="reference internal" href="#figcoef3062"><em>figCoef3062</em></a> and <a class="reference internal" href="#figfft3062"><em>figFft3062</em></a> and noted the shape of the frequency
spectrum and the frequencies at any distinct spikes.</p>
<table border="1" class="docutils" id="tabtrialdesc">
<caption>Example raw trial description for the bicycle and rider during
normal pedaling at 10 km/h.</caption>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="40%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><span class="math">\(i\)</span></th>
<th class="head">% Variance</th>
<th class="head">Motion Description</th>
<th class="head">Frequency Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>45.50</td>
<td>primarily longitudinal motion, some lateral</td>
<td>max amp = 0.6 m, most freq below 0.5 Hz, tiny spike at 1.6 Hz</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>29.39</td>
<td>primarily lateral motion, some longitudinal, small feet motion</td>
<td>max amp = 0.35 m, little spike at 0.8 Hz, most freq below 0.5 Hz</td>
</tr>
<tr class="row-even"><td>3</td>
<td>15.41</td>
<td>vertical pedaling, slight spine bend, hip/head/shoulder sway out of
phase with pedaling</td>
<td>max amp = 0.27 m, large dominant spike at 0.8 Hz</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>8.27</td>
<td>horizontal pedaling, head/shoulder sway</td>
<td>large dominant spike at 0.8 Hz with 0.19 m amp</td>
</tr>
<tr class="row-even"><td>5</td>
<td>0.82</td>
<td>yaw, knees stay still</td>
<td>max amp = 0.04 m at 0.33 Hz, most freq below 1 Hz</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>0.27</td>
<td>erratic left-hand movement</td>
<td>max amp = 0.018 m, most freq below 2 Hz</td>
</tr>
<tr class="row-even"><td>7</td>
<td>0.21</td>
<td>steer, left-hand movement, slight roll</td>
<td>most freq below 2 Hz, spike at 0.33 Hz and 1.58 Hz</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>0.07</td>
<td>knee and head bounce</td>
<td>dominant spike at 1.58 Hz</td>
</tr>
<tr class="row-even"><td>9</td>
<td>0.04</td>
<td>lateral knee movement, head jiggle</td>
<td>spikes at 1.58 Hz and 2.37 Hz, most freq below 2.5 Hz</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>0.02</td>
<td>head and knee jiggle</td>
<td>spikes at 1.58 Hz and 3.17 Hz, most freq below 3.5 Hz</td>
</tr>
</tbody>
</table>
<div class="figure" id="figcoef3062">
<img alt="_images/coef3062.png" src="_images/coef3062.png" style="width: 7.02in;" />
<p class="caption">figCoef3062</p>
<div class="legend">
Coefficients <span class="math">\(a_{ij}\)</span> versus time content of the first five principal
components for normal pedaling at 10 km/h.</div>
</div>
<div class="figure" id="figfft3062">
<img alt="_images/fft3062.png" src="_images/fft3062.png" style="width: 6.97in;" />
<p class="caption">figFft3062</p>
<div class="legend">
The frequency content of the first five principal components for normal
pedaling at 10 km/h. The vertical black line represents the open loop weave
frequency (0.28 Hz) determined from Figure <a class="reference internal" href="#figeigplot"><em>figEigPlot</em></a> at this forward
speed. The pedaling frequency is about 0.8 Hz at this speed, see Figure
<em class="xref std std-ref">figPedalSteerAngle</em>.</div>
</div>
<p>Several conclusions can be drawn from examining the coefficient data. First,
some of the components are linked by the frequencies of the coefficients and
describe an identifiable motion. The most obvious of these is that the vertical
and horizontal pedaling components make up the circular pedaling motion. Both
vary periodically and have a dominant frequency which is defined by the
cadence. In the example trial, Table <a class="reference internal" href="#tabtrialdesc"><em>Example raw trial description for the bicycle and rider during
normal pedaling at 10 km/h.</em></a>, the upper body
motions are also linked to the pedaling. Components 8 and 9 both correspond to
a frequency that is twice the pedaling frequency, which may be due to the
forces created during each pedal stroke. Component 6 seems to be the result of
a bad marker signal. Components 5 and 7 are interesting because they display
motions of the bicycle that are not dominated by the pedaling frequency and may
be candidate control motions. The percentage variance of each component gives
an idea of the relative amplitude of the components. The descriptions of each
trial were used to compile a list of motions that contribute to the principal
components. These motions, illustrated in Figure <a class="reference internal" href="#figmotions"><em>Diagrams of the common motions. (a) Top view of bicycle steer
and roll, (b) bicycle yaw, (c) horizontal and vertical components of
pedaling, (d) spine bend, (e) rider lean, (f) top view of rider twist, (g)
knee bounce and (h) two lateral knee motions. All but pedaling (c) are
exaggerated for clarity.</em></a>, are:</p>
<dl class="docutils">
<dt>Drift</dt>
<dd>The bicycle and rider drift longitudinally and laterally on the surface of
the treadmill. The motions are typically defined by two components that are
not necessarily orthogonal or aligned with the inertial coordinate system.
The motion is random and at low frequencies.</dd>
<dt>Steer</dt>
<dd>Rotation of the front assembly with respect to the rear frame. The steering
may appear linked to one of the pedaling components at the pedaling
frequency or may be in one or more components sometimes combined with roll
and/or yaw at more random frequencies, Figure <em class="xref std std-ref">figSteerRoll</em>.</dd>
<dt>Roll</dt>
<dd>The bicycle and the rider roll with respect to the ground plane.  Roll is
typically linked with steer and/or yaw and often at the pedaling frequency,
Figure <em class="xref std std-ref">figSteerRoll</em>.</dd>
<dt>Yaw</dt>
<dd>The heading angle of the bicycle and rider change together with respect to
the ground plane. This is typically linked with steer, roll and/or the
drift, Figure <em class="xref std std-ref">figYaw</em>.</dd>
<dt>Pedaling</dt>
<dd>This motion is defined by two or more components, typically a vertical and
horizontal motion of the feet, that show the feet rotating around the crank
axle at a distinct frequency and the legs following suit, Figure
<em class="xref std std-ref">figPedaling</em>.</dd>
<dt>Bend</dt>
<dd>The spine bent laterally and was always connected with the vertical
pedaling component, Figure <em class="xref std std-ref">figBend</em>.</dd>
<dt>Lean</dt>
<dd>The upper body, shoulders and head lean laterally with respect to the rear
frame and was always linked with the horizontal pedaling component, Figure
<em class="xref std std-ref">figLean</em>.</dd>
<dt>Twist</dt>
<dd>The shoulders rotate about the torso axis. This was linked to components
that contained steering motions, both random and at the pedaling frequency,
Figure <em class="xref std std-ref">figTwist</em>.</dd>
<dt>Bounce</dt>
<dd>The knee markers bounce up and down, the back straightens and the head nods
at twice the pedaling frequency, Figure <em class="xref std std-ref">figBounce</em>.</dd>
<dt>Knees</dt>
<dd>The knees move laterally relative to the bicycle frame in both opposing
directions and the same direction at random low frequencies, Figure
<em class="xref std std-ref">figKnees</em>.</dd>
<dt>Head</dt>
<dd>Head twists and random head motions showed up often. These seemed to
be due to the rider looking around randomly.</dd>
</dl>
<table border="1" class="docutils" id="figmotions">
<caption>Diagrams of the common motions. (a) Top view of bicycle steer
and roll, (b) bicycle yaw, (c) horizontal and vertical components of
pedaling, (d) spine bend, (e) rider lean, (f) top view of rider twist, (g)
knee bounce and (h) two lateral knee motions. All but pedaling (c) are
exaggerated for clarity.</caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="figSteerRoll" src="_images/steer-roll.png" style="width: 1.78333in;" /></td>
<td><img alt="figYaw" src="_images/yaw.png" style="width: 1.59in;" /></td>
<td><img alt="figPedal" src="_images/pedal.png" style="width: 1.60667in;" /></td>
<td><img alt="figBend" src="_images/bend.png" style="width: 1.46667in;" /></td>
</tr>
<tr class="row-even"><td><img alt="figLean" src="_images/lean.png" style="width: 1.54in;" /></td>
<td><img alt="figTwist" src="_images/twist.png" style="width: 1.72333in;" /></td>
<td><img alt="figBounce" src="_images/bounce.png" style="width: 1.46667in;" /></td>
<td><img alt="figKnees" src="_images/knees.png" style="width: 1.76667in;" /></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="motion-characterization">
<h4>Motion Characterization<a class="headerlink" href="#motion-characterization" title="Permalink to this headline">¶</a></h4>
<p>To identify how bicycling changes with speed it would be ideal to investigate
how the amplitude of each component varies with speed. However, the analysis
does not return the same set of components for each run so such a comparison is
typically not possible. Therefore components were grouped into classes, where
each class shows a specific physically relevant motion. The same total motion
of the class can be described by one set of components in one trial and
another, probably different, set of components in another trial. How the
amplitudes of these classes vary among experiments can be used as a measure for
how the rider and bicycle motion varies among trials.</p>
<p>To objectively identify which coefficients show the same type of motion and
could therefore form a class, the frequency content of each of the time
coefficients in a single trial was correlated to that of each of the other
components in that trial. Next a minimum correlation value was set to determine
which coefficients were correlated to each other. When the minimum was set at
0.9 only the coefficients making up the pedaling motion could be considered
correlated. On the other hand when a minimum level of 0.7 was used practically
every coefficient was correlated to each other. The only exception was the
coefficient that displayed the bounce. Its maximum correlation with another
coefficient was no higher than 0.4 for any of the tested speeds. The 0.8 level
gave a number of distinct classes of components and thus this level was used to
identify which coefficients were connected. Finally, the correlated
coefficients were viewed simultaneously in the GUI enabling the determination
of the motion class.</p>
<p>The correlated coefficients were used to form six different classes of motions,
Table <a class="reference internal" href="#tabmotionclasses"><em>The six primary motion classes.</em></a>, each made up of combinations of the previously
described motions in Figure <a class="reference internal" href="#figmotions"><em>Diagrams of the common motions. (a) Top view of bicycle steer
and roll, (b) bicycle yaw, (c) horizontal and vertical components of
pedaling, (d) spine bend, (e) rider lean, (f) top view of rider twist, (g)
knee bounce and (h) two lateral knee motions. All but pedaling (c) are
exaggerated for clarity.</em></a>.</p>
<table border="1" class="docutils" id="tabmotionclasses">
<caption>The six primary motion classes.</caption>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class Name</th>
<th class="head">Class Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Drift</td>
<td>Drift</td>
</tr>
<tr class="row-odd"><td>Pedaling</td>
<td>Pedaling <em class="xref std std-ref">figPedaling</em>, Bend <em class="xref std std-ref">figBend</em>, Lean <em class="xref std std-ref">figLean</em>,
Twist <em class="xref std std-ref">figTwist</em> Steer-Yaw-Roll &amp; Steer and Roll
<em class="xref std std-ref">figSteerRoll</em>, Yaw <em class="xref std std-ref">figYaw</em></td>
</tr>
<tr class="row-even"><td>Bounce</td>
<td>Bounce <em class="xref std std-ref">figBounce</em></td>
</tr>
<tr class="row-odd"><td>Knees</td>
<td>Knees <em class="xref std std-ref">figKnees</em></td>
</tr>
<tr class="row-even"><td>Other</td>
<td>Head and components that showed noise of some sort</td>
</tr>
</tbody>
</table>
<p>In most cases, the correlated coefficients described a single class. However,
in some cases, this was not the case and the coefficients were used to describe
more than one class. An example is that at low speed the components containing
the drift motions also contained large steer, yaw, and roll motions. Therefore,
the motions were placed in both the Drift and the Steer-Yaw-Roll classes.</p>
<p>Since the rider was not instructed to hold a specific location on the treadmill
the Drift class, which was usually the class with the largest amplitude, was
not used in further analysis of the motion and neither was the ‘Other’ class.
For each of the remaining classes, the percentages of variance of the remaining
components were recalculated without the components placed in the Drift and the
Other classes.</p>
<p>We also calculated various configuration variables from the bicycle marker
locations (See Appendix <em class="xref std std-ref">secInFrames</em> independent of the PCA perspective
for more specific motion characterizations. This allowed us to investigate the
bicycle’s configuration variable time histories and frequency content
explicitly.</p>
</div>
<div class="section" id="characterization-of-motions-during-normal-pedaling">
<h4>Characterization of motions during normal pedaling<a class="headerlink" href="#characterization-of-motions-during-normal-pedaling" title="Permalink to this headline">¶</a></h4>
<p>Figure <a class="reference internal" href="#jellybean"><em>jellybean</em></a> shows how the relative percent variance of the four
classes: Pedaling, Steer-Yaw-Roll, Bounce and Knees varies with speed for Rider
3 on the Batavus Browser bicycle. The percentage is the average of two runs at
speeds 5 km/h and above. From the graph, it is clear that at 10 km/h and higher
speeds practically all the motion that is taking place is the pedaling motion
class. Below 10 km/h, the Steer-Yaw-Roll class becomes increasingly active and
the relative percentage of the motion taking place in the pedaling class drops.
Also, at speeds below 10 km/h the lateral knee motion (Knees) class percentage
increases with decreasing speed. The increase is not as significant as that of
the Steer-Yaw-Roll class (increase to roughly 5% at 2 km/h), but it is
certainly visible. The spike at 4 km/h can be attributed to the fact that the
classes may contain higher variance motions because the classification method
is based on principal components that are not necessarily consistent between
runs. The Bounce roughly remains constant at all speeds.</p>
<div class="figure" id="jellybean">
<img alt="_images/pedaling4classes.png" src="_images/pedaling4classes.png" style="width: 5.65667in;" />
<p class="caption">jellybean</p>
<div class="legend">
The relative percent variance of the four classes: Pedaling, Steer-Yaw-Roll,
Bounce and Knees, at the different speeds when the Drift and Other classes
were removed from the results for normal pedaling. The solid lines are
scaled to 100% (left axis), the dotted lines are scaled to 10% (right axis).</div>
</div>
<p>The steer angle amplitude-frequency plot for each of the speeds calculated from
the bicycle rigid body motions is given in Figure <a class="reference internal" href="#figsteeranglepedal"><em>figSteerAnglePedal</em></a>. It
clearly shows that the steering actions take place at or around the pedaling
frequency for high and low speeds, respectively. It also shows that the
amplitude of the steering angle increases by 5000% when the speed decreases
from 30 km/h to 2 km/h.  Figure <a class="reference internal" href="#figsteeranglepedal"><em>figSteerAnglePedal</em></a> also shows the open
loop, rigid rider, weave eigenfrequency for each speed obtained from Figure
<a class="reference internal" href="#figeigplot"><em>figEigPlot</em></a>. Apparently the open loop eigenfrequency is not a frequency
in which the bicycle-rider operates.</p>
<div class="figure" id="figsteeranglepedal">
<img alt="_images/steer-angle-pedal.png" src="_images/steer-angle-pedal.png" style="width: 6.13in;" />
<p class="caption">figSteerAnglePedal</p>
<div class="legend">
Steer angle amplitude plot for the nine different speeds for normal pedaling
experiment. Solid vertical line indicates the pedaling frequency. Dashed
vertical gray line indicates the bicycle-rigid rider open loop weave
eigenfrequency from Figure <a class="reference internal" href="#figeigplot"><em>figEigPlot</em></a>.</div>
</div>
</div>
</div>
<div class="section" id="characterization-of-motions-without-pedaling">
<h3>Characterization of motions without pedaling<a class="headerlink" href="#characterization-of-motions-without-pedaling" title="Permalink to this headline">¶</a></h3>
<p>During normal pedaling, all motions, including the control tasks, are dominated
by the pedaling motions. Therefore we also looked at the motions of
bicycle-rider system without the influence of pedaling. Figure
<a class="reference internal" href="#missjellybean"><em>missjellybean</em></a> shows how the percent variance of by Steer-Yaw-Roll,
Bounce and Knees varies with speed for Rider 3 on the Batavus Browser bicycle
without pedaling. Since the bicycle is towed and the riders feet remain in the
same, constant, position relative to bicycle, there is no pedaling class
present in analysis. Furthermore, no bend, lean or twist motions with high
variance were detected during the experiments.</p>
<div class="figure" id="missjellybean">
<img alt="_images/towing3classes.png" src="_images/towing3classes.png" style="width: 5.65667in;" />
<p class="caption">missjellybean</p>
<div class="legend">
The percent variance of each of the three classes: Steer-Yaw-Roll, Bounce
and Knees, at the speeds at which the Drift and Other classes were removed
from the results for trials without pedaling. The solid lines are scaled to
100% (left axis), the dotted lines are scaled to 20% (right axis).</div>
</div>
<p>It is clear that at all speeds most motion takes place in the Steer-Yaw-Roll
class. Also interesting is that unlike in the normal pedaling situation, the
Knee motion percentage does not increase at low speeds. This may mean that the
lateral knee motion is connected to pedaling in some way. Like for the pedaling
case, the Bounce and Knees classes may contain different principal components
and a statistical approach to evaluate the percent variance of the classes
would provide clearer results. Also note that as the bicycle becomes self
stable above 16 km/h the total variance is tiny and thus any sort of random
knee motion can be a relatively large motion.</p>
<p>Figure <a class="reference internal" href="#figsteerangletowing"><em>figSteerAngleTowing</em></a> shows the bicycle rigid body steer angle
frequency-amplitude plot for different speeds. Compared to normal pedaling, the
amplitudes are about half the size at the low speeds and one tenth the size at
high speeds, indicating that smaller steering angles were made. The frequency
content now also shows a much wider, flatter spectrum compared to normal
pedaling. At 10 and 15 km/h, the frequency with the largest amplitude is near
the open loop weave eigenfrequency. However, at the other speeds, this is not
the case, once again indicating that the rigid body open loop weave
eigenfrequency is not the frequency at which the bicycle is controlled.</p>
<div class="figure" id="figsteerangletowing">
<img alt="_images/steer-angle-towing.png" src="_images/steer-angle-towing.png" style="width: 6.24in;" />
<p class="caption">figSteerAngleTowing</p>
<div class="legend">
Steer angle amplitude plot for the nine different speeds for the tasks
without pedaling. Dashed vertical grey line indicates the bicycle-rigid
rider open loop weave eigenfrequency obtained from Figure figEigPlot.</div>
</div>
</div>
</div>
<div class="section" id="conclusions">
<h2>Conclusions<a class="headerlink" href="#conclusions" title="Permalink to this headline">¶</a></h2>
<p>The view provided by principal component analysis into bicycle-rider
interaction, biomechanics and control has led us to several conclusions. During
normal bicycling there are several dominant upper body motions: lean, bend,
twist and bounce, all of which seem to be linked to the pedaling motion. This
is important for understanding which inputs are related to fundamental balance
control and which are reactions to pedaling. We hypothesize that lateral
control is mainly accomplished by steering since only upper body motion was
observed at the pedaling frequency. If upper body motions are used for control
then this control is carried out at the pedaling frequency. Considering
variations of motion with respect to speed, we observed that there is a great
deal of steering at low speeds but this decreases in magnitude as speed
increases. This is generally true for all motions and shows that the
bicycle-rider system becomes more stable at higher speeds with few detectable
control actions. At low speeds additional lateral knee motions are observed
which are probably more effective at augmenting steering control for lateral
balance than upper body motions.</p>
<p>The bicycle model predicts that the weave mode is stable above about 16 km/h.
Intuition might possibly lead one to believe that if the weave mode is already
stable, that weave frequency might be relatively undisturbed by rider control
actions and therefore present in the closed loop dynamics. However, we found no
evidence of a distinct weave frequency in the steer angle time histories of any
run. In fact the only distinct frequency that sometimes appeared was the
pedaling frequency.</p>
<p>Principal component analysis provided a unique view into the control actions of
a rider on a bicycle, but limitations in data reduction and motion grouping
leave room for more objective statistical views into the motion of the
bicycle-rider system.</p>
</div>
<div class="section" id="inertial-frames-and-configuration-variables">
<h2>Inertial frames and configuration variables<a class="headerlink" href="#inertial-frames-and-configuration-variables" title="Permalink to this headline">¶</a></h2>
<p>The transformation from marker coordinates to rigid body inertial frames and
configuration variables shown in Figure <em class="xref std std-ref">figFrames</em> is described here. A
reference frame, <span class="math">\(\mathbf{N}\)</span>, with origin <span class="math">\(n_o\)</span> corresponding
with the benchmark bicycle&nbsp; is defined with respect to the Optotrak reference
frame, <span class="math">\(\mathbf{M}\)</span>, Equation <a href="#equation-eqNtoM">(6)</a>.</p>
<div class="math" id="equation-eqNtoM">
<span class="eqno">(6)</span>\[\begin{split}\mathbf{N}=
\left[
\begin{array}{c}
\hat{\mathbf{n}}_1\\
\hat{\mathbf{n}}_2\\
\hat{\mathbf{n}}_3
\end{array}
\right]
=
\left[
\begin{array}{rrr}
1 &amp;  0 &amp;  0\\
0 &amp; -1 &amp;  0\\
0 &amp;  0 &amp; -1
\end{array}
\right]
\left[
\begin{array}{c}
\hat{\mathbf{m}}_1\\
\hat{\mathbf{m}}_2\\
\hat{\mathbf{m}}_3
\end{array}
\right]\end{split}\]</div>
<p>Thirty-one marker locations were recorded and the vector to each is defined as
<span class="math">\(\mathbf{r}^{{m_{k}}/{n_o}}\)</span> where <span class="math">\(k=1\)</span>, <span class="math">\(2\)</span>,
<span class="math">\(\ldots\)</span>, <span class="math">\(l\)</span> for the original markers and <span class="math">\(k=l+1\)</span>,
<span class="math">\(\ldots\)</span> for any additional virtual markers. To calculate the reference
frame attached to the rear bicycle we formed a frame center plane from the seat
post marker, <span class="math">\(m_{26}\)</span>, and two new additional virtual markers at the
center of the rear wheel, <span class="math">\($m_{36}$\)</span>, and the center of the head tube,
<span class="math">\(m_{33}\)</span>. For example, the center of the rear wheel was calculated by
Equation <a href="#equation-eqRearCenter">(7)</a> where <span class="math">\(m_{25}\)</span> and <span class="math">\(m_{31}\)</span> are the
left and right rear wheel markers.</p>
<div class="math" id="equation-eqRearCenter">
<span class="eqno">(7)</span>\[\mathbf{r}^{{m_{36}}/{n_o}}=(\mathbf{r}^{{m_{25}}/{n_o}}+\mathbf{r}^{{m_{31}}/{n_o}})/2\]</div>
<p>The normal vector to the plane through the rear wheel center, seat post and the
head tube center is</p>
<div class="math" id="equation-eqB2">
<span class="eqno">(8)</span>\[ \hat{\mathbf{b}}_2=
 \frac{\mathbf{r}^{{m_{36}}/m_{26}}\times\mathbf{r}^{{m_{33}}/m_{26}}}
 {|\mathbf{r}^{{m_{36}}/m_{26}}\times\mathbf{r}^{{m_{33}}/m_{26}}|}\]</div>
<p>The heading vector of the rear frame is then
<span class="math">\(\hat{\mathbf{b}}_1=\hat{\mathbf{b}}_2\times\hat{\mathbf{n}}_3\)</span> and
<span class="math">\(\hat{\mathbf{b}}_3=\hat{\mathbf{b}}_1\times\hat{\mathbf{b}}_2\)</span> follows.
These unit vectors define a reference frame that leans and yaws with the rear
frame. We assumed that the rear frame pitch is negligible. The marker locations
of the rider can now be expressed relative to the bicycle’s inertial frame with
reference to a point on the bicycle frame <span class="math">\(m_{36}\)</span>.  Equation
<a href="#equation-eqWrtRear">(?)</a> shows that the vector from any marker on the rider relative to
<span class="math">\(m_{36}\)</span> can be expressed in the bicycle reference frame,
<span class="math">\(\mathbf{B}\)</span>, rather than the inertial frame, <span class="math">\(\mathbf{N}\)</span>.  This
formulation was used in the PCA of the rider-only markers to look specifically
at rider motion relative to the bicycle. The subscripts, <span class="math">\(\mathbf{N}\)</span> and
<span class="math">\(\mathbf{B}\)</span>, in Equation <a href="#equation-eqWrtRear">(?)</a> signify which reference frame
the position vectors are expressed in.</p>
<div class="math" id="equation-eq:WrtRear">
<span class="eqno">(9)</span>\[\mathbf{r}^{{m_{k}}/m_{36}}_\mathbf{B}=
(\mathbf{r}^{{m_{k}}/m_{36}}_\mathbf{N}\cdot\hat{\mathbf{b}}_1)\hat{\mathbf{b}}_1+
(\mathbf{r}^{{m_{k}}/m_{36}}_\mathbf{N}\cdot\hat{\mathbf{b}}_2)\hat{\mathbf{b}}_2+
(\mathbf{r}^{{m_{k}}/m_{36}}_\mathbf{N}\cdot\hat{\mathbf{b}}_3)\hat{\mathbf{b}}_3\]</div>
<p>A reference frame <span class="math">\(\mathbf{D}\)</span> that is aligned with the steering axis of
the rear frame can be formulated by rotation about the
<span class="math">\(\hat{\mathbf{b}}_2\)</span> axis through the steer axis angle <span class="math">\(\lambda\)</span>,
which is measured for each bicycle [Moore2009a].</p>
<div class="math" id="equation-eqDframe">
<span class="eqno">(10)</span>\[\begin{split}\mathbf{D}=
\left[
\begin{array}{c}
\hat{\mathbf{d}}_1\\
\hat{\mathbf{d}}_2\\
\hat{\mathbf{d}}_3
\end{array}
\right]
=
\left[
\begin{array}{rrr}
\cos{\lambda} &amp;  0 &amp;  -\sin{\lambda}\\
0             &amp;  1 &amp;  0\\
\sin{\lambda} &amp;  0 &amp; \cos{\lambda}
\end{array}
\right]
\left[
\begin{array}{c}
\hat{\mathbf{b}}_1\\
\hat{\mathbf{b}}_2\\
\hat{\mathbf{b}}_3
\end{array}
\right]\end{split}\]</div>
<p>The handlebar/fork inertial frame <span class="math">\(\mathbf{E}\)</span> is then calculated by
defining <span class="math">\(\hat{\mathbf{e}}_2\)</span> to be aligned with the front wheel axle
Equation <a href="#equation-eqE2">(11)</a>.</p>
<div class="math" id="equation-eqE2">
<span class="eqno">(11)</span>\[\hat{\mathbf{e}}_2=\frac{\mathbf{r}^{{m_{21}}/{n_o}}-\mathbf{r}^{{m_{27}}/{n_o}}}
{ | \mathbf{r}^{{m_{21}}/{n_o}}-\mathbf{r}^{{m_{27}}/{n_o}} | }\]</div>
<p>The handlebar/fork frame rotates around
<span class="math">\(\hat{\mathbf{d}}_3=\hat{\mathbf{e}_3}\)</span> and then
<span class="math">\(\hat{\mathbf{e}}_1=\hat{\mathbf{e}}_3\times\hat{\mathbf{e}}_2\)</span>.
Equation <a href="#equation-eqRr">(12)</a> gives the instantaneous rear wheel radius which is used to
formulate the vector to the rear wheel contact point Equation <a href="#equation-eqR39">(13)</a>.</p>
<div class="math" id="equation-eqRr">
<span class="eqno">(12)</span>\[r_\mathbf{R}=
-\frac{\mathbf{r}^{{m_{36}}/{n_o}}\cdot\hat{\mathbf{n}}_3}
{\hat{\mathbf{b}}_3\cdot\hat{\mathbf{n}}_3}\]</div>
<div class="math" id="equation-eqR39">
<span class="eqno">(13)</span>\[\mathbf{r}^{{m_{39}}/{n_o}} =
\mathbf{r}^{{m_{36}}/{n_o}}+r_\mathbf{R}\hat{\mathbf{b}}_3\]</div>
<p>This now allows us to calculate six of the eight configuration variables of the
bicycle as a function of time (<span class="math">\(q_5\)</span> and <span class="math">\(q_8\)</span> are the rear and
front wheel rotations, respectively).</p>
<div class="math" id="equation-eqQ1">
<span class="eqno">(14)</span>\[\textrm{Distance to the ground contact point: }q_1 =
\mathbf{r}^{{m_{39}}/{n_o}}\cdot\hat{\mathbf{n}}_1\]</div>
<div class="math" id="equation-eqQ2">
<span class="eqno">(15)</span>\[\textrm{Distance to the ground contact point: }q_2 =
\mathbf{r}^{{m_{39}}/{n_o}}\cdot\hat{\mathbf{n}}_2\]</div>
<div class="math" id="equation-eqQ3">
<span class="eqno">(16)</span>\[\textrm{Yaw angle: }q_3 = \arccos\left(\hat{\mathbf{b}}_1
\cdot\hat{\mathbf{n}}_1\right)\]</div>
<div class="math" id="equation-eqQ4">
<span class="eqno">(17)</span>\[\textrm{Roll angle: }q_4 = \arccos\left(\hat{\mathbf{b}}_3
\cdot\hat{\mathbf{n}}_3\right)\]</div>
<div class="math" id="equation-eqQ6">
<span class="eqno">(18)</span>\[\textrm{Pitch angle: }q_6 = 0\]</div>
<div class="math" id="equation-eqQ7">
<span class="eqno">(19)</span>\[\textrm{Steer angle: }q_7 = \arccos\left(\hat{\mathbf{d}}_1
\cdot\hat{\mathbf{e}}_1\right)\]</div>
</div>
<div class="section" id="simple-statistics">
<h2>Simple Statistics<a class="headerlink" href="#simple-statistics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id22">
<h3>Preface<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>Once again, we collected more data than we knew what to do with [Moore2011]
and  only looked at a subset of it from one rider. I took my first statistics
class once I was back at Davis in the Fall of 2009 with the intention of
learning better ways to analyze large data sets and make more over arching
conclusions with the bicycle data. In the process, I learned about mixed
effects models and they seemed appropriate for our data sets and would
potentially allow us to see how the kinematic motions changed with respect to
speeds, riders, manuevers, etc. The first step in building a model like is to
identify the independent and dependent variables. The dependent variables can
be broken up into continous variables and factors.  Speeds the continous
variable, with riders, bicycles and manuevers as the factors. The independent
variables are trickier because we recorded time histories, so various
statistics need to be chosen. These could be things like the results of the PCA
analyses, but more concrete the kinematic statisticss potentially allow for
more understanding. The PCA we did assumes nothing about the system being
studied. For example, one statistic could be the standard deviation of various
generalized coordinates. I never managed to get far with this as other things
came up, but at least  started thinking about the relevant statistics. The
following is a conference paper I submitted to the 2010 International Sports
Engineering Association conference where basic statistics of the time histories
are chosen and some visualization of the statistics with respect to speed are
shown. I primarily used this data to decide on sensor ranges when building the
Davis instrumented bicycle presented in Chapter <a class="reference internal" href="davisbicycle.html#davisbicycle"><em>Davis Instrumented Bicycle</em></a>, but I
think that some better statical models god be derived. I also only present some
of the graphs here, but the source code can generate a lot more.</p>
</div>
<div class="section" id="id24">
<h3>Abstract<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<p>An overview of bicycle and rider kinematic motions from a series of
experimental treadmill tests is presented. The full kinematics of bicycles and
riders were measured with an active motion capture system. Motion across speeds
are compared graphically with box and whiskers plots. Trends and ranges in
amplitude are shown to characterize the system motion. This data will be used
to develop a realistic biomechanical model and control model for the rider and
for future experimental design.</p>
</div>
<div class="section" id="id25">
<h3>Introduction<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<p>In the past decade, research has grown on single track vehicles culminating in
the recently benchmarked bicycle model [Meijaard2007]. Two other recent papers
([Astrom2005], [Limebeer2006]) have also presented overviews of current and
historical research in bicycle dynamics and control. These review a plethora of
dynamic models but little is known about which models are good at representing
the actual system. Very little model-validation experimentation has been
performed in the literature and many of the modeling assumptions, especially
those regarding tire and rider dynamics, remain questionable.  The most recent
notable model-validation study is the verification of the benchmark model
[Kooijman2008]. Only a handful of other good experimental studies on bicycle
dynamics exist. The work [Lunteren1970] performed some 40 years ago in the
same halls as the Kooijman experiments [Kooijman2008] included extensive
efforts to validate a human control model using a bicycle simulator paired with
statistical analysis. Also, around the same time as the first Delft experiments
[Lunteren1970], a substantial study was done at Calspan and Schwinn
[Roland1971].</p>
<p>With these studies providing some background, we have begun work to validate
the kinematics of the bicycle and rider in a way that can facilitate the
derivation of both dynamic models of the bike and rider and a rider control
model. Our work began with an instrumented bicycle [Kooijman2009a] that was
capable of measuring dynamics and collecting video of the rider’s motion. We
then used full body motion capture [Moore2009b] to quantitatively characterize
the rider and bicycle kinematics. Principal component analysis was used to
analyze the motion capture data but this proved to give less insight than
expected. These initial efforts did show that the dominant motions for control
are steering, that the rider’s motions are small for normal bicycling tasks,
and that pedaling motions are correlated with other rider motions. The present
work examines the same motion capture data from [Moore2009b] with rigid body
kinematics in mind and uses a statistical approach to identify trends with
forward speed, a strong dependency of bicycle stability.</p>
</div>
<div class="section" id="experimental-design">
<h3>Experimental Design<a class="headerlink" href="#experimental-design" title="Permalink to this headline">¶</a></h3>
<p>The experiments were performed in a controlled environment while the motion of
the bicycle and rider were measured with an active motion capture system
[Northern2009]. The rider rode on a <span class="math">\($3\times5$\)</span> meter treadmill,
(Figure <a class="reference internal" href="#figmarkers"><em>Rider 1 and the Batavus Stratos Deluxe with marker positions.
Body marker positions visible from the rear.</em></a>) capable of belt speeds up to 35 km/h.  Three male
riders of similar age [23, 26, 31 years] and build [height (1.84, 1.83, 1.76 m)
and mass (74, 72, 72 kg)] participated as subjects.  Each rode two different
Dutch bicycles. Each rider performed all runs in one day in the same order (no
randomization) and was instructed to bicycle comfortably at a constant speed in
the range of 2 to 30 km/h for the duration of the run. There were at least 2
repetitions of each speed with each bicycle. A run was sampled at a frequency
of 100 Hz for 60 seconds.</p>
<p>Bicycle markers were placed to easily extract the rigid body motion (i.e. body
orientations and locations) of the frame and fork (Figure <a class="reference internal" href="#figmarkers"><em>Rider 1 and the Batavus Stratos Deluxe with marker positions.
Body marker positions visible from the rear.</em></a>).
Four markers were attached to the fork and seven to the rear frame. A marker
was attached on the right and left sides of the center of each wheel, the seat
stays, the ends of the handlebars, and the head tube. A single marker was also
attached to the back of the seat post.</p>
<p>We recorded the locations of 20 points on the rider (Figure <a class="reference internal" href="#figmarkers"><em>Rider 1 and the Batavus Stratos Deluxe with marker positions.
Body marker positions visible from the rear.</em></a>):
left and right sides of the helmet near the temple, back of the helmet,
shoulders (greater tuberosity of the humerus), elbows (lateral epicondyle of
the humerus), wrists (pisiform of the carpus), between the shoulder blades on
the spine (T6 of the thoracic vertebrae), the tail bone (coccyx), midpoint on
the spine between the coccyx and shoulder blades (L1 on the lumbar vertebrae),
hips (greater trochanter of the femur), knees (lateral epicondyle of the
femur), ankles (lateral malleolus of the fibula) and feet (proximal metatarsal
joint).</p>
</div>
<div class="section" id="data-processsing">
<h3>Data Processsing<a class="headerlink" href="#data-processsing" title="Permalink to this headline">¶</a></h3>
<p>Once marker data was repaired, we calculated several generalized coordinates.
This provided a way to characterize the bicycle and rider as a system of rigid
bodies which seems to give a clearer picture of the underlying control motions
that the principal component analysis provided [Moore2009b]. The coordinates
included bicycle yaw, roll and steer angles and the locations of the wheel
ground contact points, and several coordinates to represent rider motion: the
rider’s lean and twist angles, lateral knee motion, and lateral tail bone
motion, all relative to the bicycle frame plane of symmetry. The rider lean
angle can be thought of as the angle of the rider’s spine relative to the
bicycle frame. The twist is the angle through which the torso rotates about the
spine. The knee and butt motions are the relative lateral distances from the
frame plane of symmetry for each marker. These are shown because we observed
large lateral knee movement in video footage at low speeds [Kooijman2009a]
that may be used for additional control. The butt motion is plotted to give an
idea of how the seat can potentially be shifted under the torso to control roll
angle. Figures <a class="reference internal" href="#fig3017wheel"><em>fig3017wheel</em></a>, <a class="reference internal" href="#fig3017bang"><em>fig3017bAng</em></a>, <a class="reference internal" href="#fig3017rlat"><em>fig3017rLat</em></a>, and
<a class="reference internal" href="#fig3017rang"><em>fig3017rAng</em></a> show examples of the time histories of these coordinates.</p>
<div class="figure" id="fig3017wheel">
<img alt="_images/3017wheel.png" src="_images/3017wheel.png" style="width: 3in;" />
<p class="caption">fig3017wheel</p>
<div class="legend">
The positions of the front and rear wheel contact points throughout a single
a normal biking run at 10 km/h.</div>
</div>
<div class="figure" id="fig3017bang">
<img alt="_images/3017bAng.png" src="_images/3017bAng.png" style="width: 3in;" />
<p class="caption">fig3017bAng</p>
<div class="legend">
The bicycle yaw, roll and steer angles throughout a single a normal biking
run at 10 km/h.</div>
</div>
<div class="figure" id="fig3017rlat">
<img alt="_images/3017rLat.png" src="_images/3017rLat.png" style="width: 3in;" />
<p class="caption">fig3017rLat</p>
<div class="legend">
Lateral deviations of the knees and butt from the frame plane throughout a
single normal biking run at 10 km/h.</div>
</div>
<div class="figure" id="fig3017rang">
<img alt="_images/3017rAng.png" src="_images/3017rAng.png" style="width: 3in;" />
<p class="caption">fig3017rAng</p>
<div class="legend">
Rider lean and twist angles throughout a single normal biking run at 10
km/h.</div>
</div>
<p>The primary coordinates are presented in Section <em class="xref std std-ref">X</em>. The remaining are
calcuated as follows. The instantaneous front wheel radius is</p>
<div class="math" id="equation-eqFrontRadius">
<span class="eqno">(20)</span>\[r_\mathbf{F} = \frac{-\mathbf{r}^{m_{32}/n_o} \cdot \hat{n}_3}
{\operatorname{sin}[\operatorname{arccos}(\hat{e}_2 \cdot \hat{n}_3)]}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rf</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="o">-</span><span class="n">r</span><span class="p">[</span><span class="mi">31</span><span class="p">],</span> <span class="n">n</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">n</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
</pre></div>
</div>
<p>The front wheel contact point is then</p>
<div class="math" id="equation-eqFrontWheelContact">
<span class="eqno">(21)</span>\[\mathbf{r}^{m_{40}/n_o} = \mathbf{r}^{m_{32}/n_o} + r_\mathbf{F}
\frac{(\hat{e}_2 \times \hat{n}_3) \times \hat{e}_2}
{|(\hat{e}_2 \times \hat{n}_3) \times \hat{e}_2|}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rfvec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">n</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">r_m32_m40</span> <span class="o">=</span> <span class="n">rf</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">uvec</span><span class="p">(</span><span class="n">rfvec</span><span class="p">)</span>
<span class="n">r</span><span class="p">[</span><span class="mi">39</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">31</span><span class="p">]</span> <span class="o">+</span> <span class="n">r_m32_m40</span>
</pre></div>
</div>
<p>The coordinates to the front wheel contact points are then found by a dot
product with the lateral and longitudinal unit vectors in the ground plane</p>
<div class="math" id="equation-eqFrontX">
<span class="eqno">(22)</span>\[q_8 = \hat{n}_1 \cdot \mathbf{r}^{m_{40}/n_o}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># x distance to the front wheel contact point</span>
<span class="n">q</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="mi">39</span><span class="p">])</span>
</pre></div>
</div>
<div class="math" id="equation-eqFrontY">
<span class="eqno">(23)</span>\[q_9 = \hat{n}_2 \cdot \mathbf{r}^{m_{40}/n_o}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># y distance to the front wheel contact point</span>
<span class="n">q</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="mi">39</span><span class="p">])</span>
</pre></div>
</div>
<p>The lateral distance of the rider&#8217;s knees to the bicycle frame are</p>
<div class="math" id="equation-eqRightKnee">
<span class="eqno">(24)</span>\[q_{10} = \hat{b}_2 \cdot \mathbf{r}^{{m_3}/{n_o}} - \mathbf{r}^{m_{26}/n_o}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">q</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="mi">25</span><span class="p">]))</span>
</pre></div>
</div>
<div class="math" id="equation-eqLeftKnee">
<span class="eqno">(25)</span>\[q_{11} = \hat{b}_2 \cdot \mathbf{r}^{{m_7}/{n_o}} - \mathbf{r}^{m_{26}/n_o}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># left lateral knee motion</span>
<span class="n">q</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="mi">25</span><span class="p">]))</span>
</pre></div>
</div>
<p>Simarly, the tail bone&#8217;s lateral deviation from the bicycle frame is</p>
<div class="math" id="equation-eqLatButt">
<span class="eqno">(26)</span>\[q_{12} = \hat{b}_2 \cdot \mathbf{r}^{{m_9}/{n_o}} - \mathbf{r}^{m_{26}/n_o}\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># lateral butt motion</span>
<span class="n">q</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="mi">25</span><span class="p">]))</span>
</pre></div>
</div>
<p>I take the angle between a line running along the rider&#8217;s back and the frame
plane to be a measure of rider lean, Figure <a class="reference internal" href="#figriderlean"><em>figRiderLean</em></a>.</p>
<div class="figure" id="figriderlean">
<img src="_images/rider-lean.svg" width="4in" /><p class="caption">figRiderLean</p>
<div class="legend">
A depiction of the rider lean angle. It is irrespective of the rider&#8217;s
forward lean and notice that point 9 can be out of the plane of the bicycle.
It is the angle of the back vector projected into a plane normal to the roll
axis.</div>
</div>
<p>The rider&#8217;s lean angle is then calculated by first finding the vector from the
butt to the upper back</p>
<div class="math" id="equation-eqBackVector">
<span class="eqno">(27)</span>\[\mathbf{r}^{m_9/m_{11}} = \mathbf{r}^{m_{11}/n_o} - \mathbf{r}^{m_9/n_o}\]</div>
<p>projecting that vector into the plane normal to the roll axis</p>
<div class="math" id="equation-eqBackProj">
<span class="eqno">(28)</span>\[\mathbf{v} = \frac{\mathbf{r}^{m_9/m_{11}} -
(\mathbf{r}^{m_9/m_{11}} \cdot \hat{b}_1) \hat{b}_1}
{|\mathbf{r}^{m_9/m_{11}} -
(\mathbf{r}^{m_9/m_{11}} \cdot \hat{b}_1) \hat{b}_1|}\]</div>
<p>and finally calculating the angle between the projected vector and the lateral
symmetry plane</p>
<div class="math" id="equation-eqLean">
<span class="eqno">(29)</span>\[q_{12} = -(\mathbf{v} \cdot b_2) \operatorname{arccos}\left(-\mathbf{v} \cdot b_3\right)\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># lean angle</span>
<span class="n">r_m9_m11</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">uvec</span><span class="p">(</span><span class="n">r_m9_m11</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">r_m9_m11</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">q</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">sign</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
<p>The twist is the angle of the rider is calcalted by creating a vector from one
shoulder to the other</p>
<div class="math" id="equation-eqShouldeVector">
<span class="eqno">(30)</span>\[\mathbf{r}^{m_{19}/m_{15}} = \mathbf{r}^{m_{15}/n_o} - \mathbf{r}^{m_{19}/n_o}\]</div>
<p>and projecting it into the plane normal to the back line</p>
<div class="math" id="equation-eqShoulderProj">
<span class="eqno">(31)</span>\[\mathbf{w} = \frac{\mathbf{r}^{m_{19}/m_{15}} -
(\mathbf{r}^{m_{19}/m_{15}} \cdot \mathbf{v}) \mathbf{v}}
{|\mathbf{r}^{m_{19}/m_{15}} -
(\mathbf{r}^{m_{19}/m_{15}} \cdot \mathbf{v}) \mathbf{v}|}\]</div>
<p>and finally computing the angle between it and a plane which is along the back
line and perpendicular to the bicycle lateral plane of symmetry</p>
<div class="math" id="equation-eqTwist">
<span class="eqno">(32)</span>\[q_{14} = -\mathbf{w} \cdot (\mathbf{r}^{m_9/m_{11}} \times
(\hat{b}_1 \times \mathbf{v})) \operatorname{arccos}(\mathbf{w}
\cdot (\hat{b}_1 \times \mathbf{v}))\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># twist angle</span>
<span class="n">r_m19_m15</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="mi">18</span><span class="p">]</span>
<span class="n">tw_proj</span> <span class="o">=</span> <span class="n">uvec</span><span class="p">(</span><span class="n">r_m19_m15</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">r_m19_m15</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span><span class="o">*</span><span class="n">v</span><span class="p">)</span>
<span class="n">g2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">)</span>
<span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">tw_proj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">r_m9_m11</span><span class="p">,</span> <span class="n">g2</span><span class="p">))</span>
<span class="n">q</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">sign</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">tw_proj</span><span class="p">,</span> <span class="n">g2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="id40">
<h3>Results<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<p>Direct examination of individul times series can be fruitful [Dolye1987], but
it is hard to make generalizations that apply to more that one specific case.
In our case, we have are nearly 3000 different time histories to examine with
the coordinates we&#8217;ve chosen. Examining the frequency spectrum of each time
history gives a different and sometimes more revealing view. For the runs in
which the rider pedals, the pedaling frequency is often the dominant frequency,
with little indication of other distinct frequencies [Moore2009b].</p>
<p>A better way to visualize how the coordinates change with speed, for example,
is to look at various statistical of the time histories.  We grouped all of the
runs together for combined data sets at each speed of between 48,000 and 72,000
points, depending on how many repetitions of runs were performed (i.e.  between
8 and 12). These were then plotted as separate box plots for each speed and for
each state. The box and whiskers charts plot a center line for the median of
the data, a box that bounds the 25% and 75% quartiles, whiskers that encompass
the data that falls within <span class="math">\($1.5\times(Q_{75}-Q_{25})$\)</span> and crosses for
any outlier data points. Trends can be identified based on the spread and
median of the data at each speed. An offset median shows that the distribution
is skewed (e.g. steering more to the left than the right). The box and the
whiskers encompass the vast majority of the data. The whiskers can be used to
compare the coordinate excursions across speeds.</p>
<p>The yaw and steer plots show that the angles are small and tightly distributed
at high speeds, but that below 10 km/h the spread begins to grow. It is also
interesting that the yaw and steer graphs have very similar distributions. For
a bicycle without a rider, there is a simple linear kinematic relationship such
that yaw rate is only a function of steer rate and steer angle, which is the
likely reason for the similarity in steer and yaw. The spread of the roll angle
on the other hand stays fairly constant regardless of speed. The butt lateral
distance has somewhat constant distributions across speeds and it is also
apparent that the rider generally sits about one centimeter off the center
plane of the bicycle. The lateral knee distances are interesting in the fact
that spreads increase with lower speeds. We were able to visually detect large
knee movements in the video data at low speeds and hypothesized about the role
the knees could possibly play in control of the bicycle ([Kooijman2009a],
[Moore2009b]). The rider lean angles are very small and do not show much
change with speed. This continues to support our hypotheses that riders do not
make use of leaning for control in normal bicycling. The rider twist angles
show a little more spread at low speeds. This could be tied to the fact that
you twist more when you steer more.</p>
<div class="figure">
<img alt="_images/YawAngleNb.png" src="_images/YawAngleNb.png" style="width: 3in;" />
<p class="caption">figYawAngleNb</p>
<div class="legend">
Box and whiskers plots of the yaw angle data from all riders and bicycles
versus speed.</div>
</div>
<div class="figure">
<img alt="_images/RollAngleNb.png" src="_images/RollAngleNb.png" style="width: 3in;" />
<p class="caption">Box and whiskers plots of the roll angle data from all riders and bicycles
versus speed.</p>
</div>
<div class="figure">
<img alt="_images/SteerAngleNb.png" src="_images/SteerAngleNb.png" style="width: 3in;" />
<p class="caption">figSteerAngleNb</p>
<div class="legend">
Box and whiskers plots of the steer angle data from all riders and bicycles
versus speed.</div>
</div>
<div class="figure">
<img alt="_images/RightKneeLateralDistanceNb.png" src="_images/RightKneeLateralDistanceNb.png" style="width: 3in;" />
<p class="caption">Box and whiskers plots of the right knee lateral distance data from all
rider and bicycles versus speed.</p>
</div>
<div class="figure">
<img alt="_images/LeftKneeLateralDistanceNb.png" src="_images/LeftKneeLateralDistanceNb.png" style="width: 3in;" />
<p class="caption">Box and whiskers plots of the left knee lateral distancee data from all
riders and bicycles versus speed.</p>
</div>
<div class="figure">
<img alt="_images/ButtLateralDistanceNb.png" src="_images/ButtLateralDistanceNb.png" style="width: 3in;" />
<p class="caption">Box and whiskers plots of the butt lateral distance data from all riders and
bicycles versus speed.</p>
</div>
<div class="figure">
<img alt="_images/LeanAngleNb.png" src="_images/LeanAngleNb.png" style="width: 3in;" />
<p class="caption">Box and whiskers plots of the lean angle data from all riders and bicycles
versus speed.</p>
</div>
<div class="figure">
<img alt="_images/TwistAngleNb.png" src="_images/TwistAngleNb.png" style="width: 3in;" />
<p class="caption">Box and whiskers plots of the twist angle data from all riders and bicycles
versus speed.</p>
</div>
</div>
<div class="section" id="id45">
<h3>Conclusions<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<p>The box and whiskers plots are a method of visualizing a more statistically
valid view of the kinematics of the bicycle and rider during stabilization
tasks. General trends in how states change with speed were shown and can be
utilized for rider bicycle dynamic and control model design. This is only one
of the first steps at understanding how particular motions vary with speed,
manuevers, bicycles, riders and even the correllations among the motions. THe
source code also computes statistics for the rates, accelerations and frequency
content of the coordinates. The numerical values presented also provide a
framework for design of measurement techniques needed in experimental studies.</p>
<div class="admonition-todo admonition" id="index-7">
<p class="first admonition-title">Todo</p>
<p class="last">provide all of the plots in an image gallery</p>
</div>
</div>
</div>
<div class="section" id="id46">
<h2>Conclusions<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<p>The PCA data decomposes the motion into a collection of linear motions, with
the dominant ones being exposed. We&#8217;d hoped that we would be able to apply a
second PCA in much the same fashion as [Troje2002] did with the walkers, but
bicycling doesn&#8217;t produce clean periodic motion like walking does. [Troje2002]
was able to apply the second PCA across second independent variables to
characterize the change in motion with respect to the variables. We are most
interested in dynamical changes with respect to speed for the bicycle-rider
system, but also how different bicycle designs affect the control and dynamics.
Our attempt at tracking how the principal components changed with respect to
speed, was somewhat flawed due to the difficulty in matching components from
run to run and became somewhat of a subjective task. It correctly shows the
increased motions at low speeds, but the information from the principal
components interested me less and less as we continued to work with it. This is
what led me to transform the marker data into more concrete cooridinates that
have more meaning and connection to the kinematics we typically examine in the
bicycle-rider system. I think the data set can provide some more concrete
conclusions about how we balance a bicycle. One other thing that I thought
about pursuing was making use of scaling with respect to mass in the principal
component analysis. It is possible to applying weighting such that motions
associated with points on limbs with more mass. This could in affect reveal
motions that have more effect on the dynamics.</p>
<div class="admonition-todo admonition" id="index-8">
<p class="first admonition-title">Todo</p>
<p class="last">expand on this last thought</p>
</div>
</div>
</div>


<!--
<script type="text/javascript">
	var disqus_developer = 1;
</script>
-->
<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://jkm-dissertation.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a
		href="http://disqus.com/?ref_noscript=jkm-dissertation">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="delftbicycle.html">Delft Instrumented Bicycle</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="davisbicycle.html">Davis Instrumented Bicycle</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011, Jason K. Moore.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
<script type="text/javascript">
var disqus_shortname = 'jkm-dissertation';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/jkm-dissertation/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

  </body>
</html>